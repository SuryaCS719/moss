<html>
<head>
<title>/fall24/sgstearn/pa1/List.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/sgstearn/pa1/List.c<p></p><pre>
/***
* Shane Stearns
* sgstearn
* 2024 Fall CSE101
* List
* List ADT
***/
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match23-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_32.gif"/></a>

typedef struct Node {
   int data;
   struct Node* next;
   struct Node* prev;
} Node;

typedef struct ListObj {
   Node* front;
   Node* back;
   Node* cursor;
   int cursIndex;
   int length;
} ListObj;

List newList (void) {
   List L = malloc(sizeof(ListObj));
   if (L == NULL) {
       printf("Error: Memory allocation failed for newList\n");
       exit(1);
   }
   L-&gt;front = L-&gt;back = L-&gt;cursor = NULL;
   L-&gt;cursIndex = -1;
   L-&gt;length = 0;
   return L;
}

void freeList (List* pL) {
   if (pL != NULL &amp;&amp; *pL != NULL) {
      Node* c = (*pL)-&gt;front;
      Node* n;
      while (c != NULL) {
         n = c-&gt;next;
         free (c);
         c = n;
     }
     free(*pL);
     *pL = NULL;
   }
}

int length (List L) {
   if (L == NULL) {
      return 0;
   } else {
      return L-&gt;length;
   }
}

int index (List L) {
   if (L == NULL) {
      printf("throw error in index\n");
      return -1;
   }
   return L-&gt;cursIndex;
}

int front (List L) {
   if (L == NULL || L-&gt;front == NULL) {
      printf("no data throw error in FRONT func\n");
      return -1;
   }
   return L-&gt;front-&gt;data;
}

int back (List L) {
   if (L == NULL || L-&gt;front == NULL) {
      printf("no data throw error in Back func\n");
      return -1;
   }
   return L-&gt;back-&gt;data;
}

int get (List L) {
   if (L == NULL || L-&gt;cursor == NULL) {
      printf("no data throw error in GET func\n");
      return -1;
   }
   return L-&gt;cursor-&gt;data;
}

bool equals (List A, List B) {
   if (A == NULL || B == NULL) {
      printf("Error: One or both lists are NULL in equals\n");
      return false;
   }
   if (A-&gt;length != B-&gt;length) {
      return false;
   }

   Node* a = A-&gt;front;
   Node* b = B-&gt;front;

   if (a == NULL &amp;&amp; b == NULL) {
      return true;
   } else if (a == NULL || b == NULL) {
      return false;
   }

   while (a != NULL &amp;&amp; b != NULL) {
      if (a-&gt;data != b-&gt;data) {
         return false;
      }
      a = a-&gt;next;
      b = b-&gt;next;
   }

   return true;
}

void clear (List L) {
   if (L == NULL) {
      return;
   }
   Node* c = L-&gt;front;
   Node* n;
   while (c != NULL) {
      n = c-&gt;next;
      free(c);
      c = n;
   }
   L-&gt;front = L-&gt;back = L-&gt;cursor = NULL;
   L-&gt;cursIndex = -1;
   L-&gt;length = 0;
}

void set (List L, int x) {
   if (L == NULL || L-&gt;cursor == NULL) {
      printf(" some error here \n");
      return;
   }
   L-&gt;cursor-&gt;data = x;
}

void moveFront (List L) {
   if (L != NULL &amp;&amp; L-&gt;length &gt; 0) {
      L-&gt;cursor = L-&gt;front;
</font>      L-&gt;cursIndex = 0;
   }
}

void moveBack (List L) {
   if (L != NULL &amp;&amp; L-&gt;length &gt; 0) {
      L-&gt;cursor = L-&gt;back;
<a name="1"></a><font color="#00FF00"><a href="match23-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_25.gif"/></a>

      L-&gt;cursIndex = L-&gt;length - 1;
   }
}

void movePrev (List L) {
   if (L == NULL || L-&gt;cursor == NULL || L-&gt;cursIndex == -1) {
      return;
   }
   if (L-&gt;cursIndex &gt; 0) {
      L-&gt;cursor = L-&gt;cursor-&gt;prev;
      L-&gt;cursIndex--;
   } else if (L-&gt;cursIndex == 0) {
      L-&gt;cursor = NULL;
      L-&gt;cursIndex = -1;
   }
}

void moveNext (List L) {
   if (L == NULL || L-&gt;cursor == NULL || L-&gt;cursIndex == -1) {
      return;
   }
   if (L-&gt;cursor-&gt;next != NULL) {
      L-&gt;cursor = L-&gt;cursor-&gt;next;
      L-&gt;cursIndex++;
   } else {
      L-&gt;cursor = NULL;
      L-&gt;cursIndex = -1;
   }
}

void prepend (List L, int x) {
   printf("Prepending %d to list\n", x);
   Node* n = malloc(sizeof(Node));
   if (n == NULL) {
       printf("Error: Memory allocation failed for prepend\n");
       exit(1);
   }
   n-&gt;data = x;
   n-&gt;prev = NULL;
   n-&gt;next = L-&gt;front;

   if (L-&gt;front != NULL) {
      L-&gt;front-&gt;prev = n;
   } else {
      L-&gt;back = n;
   }
   L-&gt;front = n;
   L-&gt;length++;
}

void append (List L, int x) {
   Node* n = malloc(sizeof(Node));
   if (n == NULL) {
       printf("Error: Memory allocation failed for append\n");
       exit(1);
   }
   n-&gt;data = x;
   n-&gt;prev = L-&gt;back;
   n-&gt;next = NULL;
   if (L-&gt;back == NULL) {
      L-&gt;front = n;
   } else {
      L-&gt;back-&gt;next = n;
   }
   L-&gt;back = n;
   L-&gt;length++;
}

void insertBefore(List L, int x) {
   if (L == NULL || L-&gt;cursor == NULL || L-&gt;cursIndex &lt; 0) {
      printf("list empty, error in insertbefore");
      return;
   }
   Node* n = malloc(sizeof(Node));
   if (n == NULL) {
      printf("error in allocation in inerstbefore");
      exit(1);
   }
   n-&gt;data = x;
   if (L-&gt;cursor == L-&gt;front) {
      n-&gt;prev = NULL;
      n-&gt;next = L-&gt;front;
      L-&gt;front-&gt;prev = n;
</font>      L-&gt;front = n;
   } else {
      n-&gt;next = L-&gt;cursor;
      n-&gt;prev = L-&gt;cursor-&gt;prev;
      L-&gt;cursor-&gt;prev-&gt;next = n;
      L-&gt;cursor-&gt;prev = n;
   }
<a name="4"></a><font color="#FF00FF"><a href="match23-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_7.gif"/></a>

   L-&gt;length++;
   L-&gt;cursIndex++;
}

void insertAfter(List L, int x) {
   if (L == NULL || L-&gt;cursor == NULL || L-&gt;cursIndex &lt; 0) {
      printf("list empty, error in insertbefore");
      return;
   }
   Node* n = malloc(sizeof(Node));
   if (n == NULL) {
      printf("error in allocation in inerstbefore");
      exit(1);
   }
   n-&gt;data = x;
   if (L-&gt;cursor == L-&gt;back) {
      n-&gt;prev = L-&gt;back;
      n-&gt;next = NULL;
      L-&gt;back-&gt;next = n;
      L-&gt;back = n;
   } else {
      n-&gt;next = L-&gt;cursor-&gt;next;
      n-&gt;prev = L-&gt;cursor;
</font><a name="2"></a><font color="#0000FF"><a href="match23-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_17.gif"/></a>

      L-&gt;cursor-&gt;next-&gt;prev = n;
      L-&gt;cursor-&gt;next = n;
   }
   L-&gt;length++;
   L-&gt;cursIndex++;
}

void deleteFront(List L) {
   if (L == NULL || L-&gt;length == 0) {
      printf("list empty cant deleteFront");
      return;
   }
   Node* d = L-&gt;front;
   if (L-&gt;front == L-&gt;back) {
      L-&gt;front = L-&gt;back = NULL;
   } else {
      L-&gt;front = L-&gt;front-&gt;next;
      L-&gt;front-&gt;prev = NULL;
   }
   free(d);
   L-&gt;length--;
   if (L-&gt;cursor == d) {
       L-&gt;cursor = NULL;
       L-&gt;cursIndex = -1;
   }
}

void deleteBack(List L) {
   if (L == NULL || L-&gt;length == 0) {
      printf("list empty cant deleteback");
      return;
   }
   Node* d = L-&gt;back;
   if (L-&gt;front == L-&gt;back) {
      L-&gt;front = L-&gt;back = NULL;
   } else {
      L-&gt;back = L-&gt;back-&gt;prev;
      L-&gt;back-&gt;next = NULL;
   }
   free(d);
   L-&gt;length--;
   if (L-&gt;cursor == d) {
       L-&gt;cursor = NULL;
       L-&gt;cursIndex = -1;
   }
}

void delete(List L) {
   if (L == NULL || L-&gt;cursor == NULL || L-&gt;cursIndex &lt;0 ) {
      printf("list empty or cursor undefined cant delete");
      return;
   }
   Node* c = L-&gt;cursor;
   if (c == L-&gt;front) {
      deleteFront(L);
   } else if (c == L-&gt;back) {
      deleteBack(L);
   } else {
      c-&gt;prev-&gt;next = c-&gt;next;
</font>      c-&gt;next-&gt;prev = c-&gt;prev;
      free(c);
      L-&gt;length--;
   }
   L-&gt;cursor = NULL;
<a name="3"></a><font color="#00FFFF"><a href="match23-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_7.gif"/></a>

   L-&gt;cursIndex = -1;
}


void printList(FILE* out, List L) {
   if (L == NULL) {
       printf("Error: Trying to print a NULL list\n");
       return;
   }
   Node* i = L-&gt;front;
   while (i != NULL) {
      fprintf(out, "%d", i-&gt;data);
      i = i-&gt;next;
   }
   fprintf(out, "\n");
}

List copyList(List L) {
   if ( L == NULL) {
      printf("Error: cant copy a NULL List");
      return NULL;
   }
   List l = newList();
   l-&gt;cursor = NULL;
   l-&gt;cursIndex = -1;
   Node* c = L-&gt;front;
   if (c == NULL) {
      return l;
   }
   do {
      append(l, c-&gt;data);
      c = c-&gt;next;
   } while (c != NULL);
</font>   return l;
}

</pre>
</body>
</html>

<html>
<head>
<title>/fall24/nyu16/pa1/List.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nyu16/pa1/List.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include "List.h"



<a name="1"></a><font color="#00FF00"><a href="match229-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

typedef struct NodeObj* Node;

typedef struct NodeObj{
    int data;
    Node next;
    Node prev;
}NodeObj;


Node newNode(int value){
    Node N = malloc(sizeof(NodeObj));
    N-&gt;data = value;
</font>    N-&gt;next = NULL;
    N-&gt;prev = NULL;
    return N;

}

void freeNode(Node* pN){
    free(*pN);
}

typedef struct ListObj{
    Node front;
    Node back;
    Node cursor;
    int length;
    int index;
}ListObj;


List newList(){
    List L = malloc(sizeof(ListObj));
    L-&gt;front = NULL;
    L-&gt;back = NULL;
    L-&gt;cursor = NULL;
    L-&gt;length = 0;
    L-&gt;index = -1;
    return L;
}

void freeList(List* pL){
    if (*pL == NULL){
        return;
    }
    clear(*pL);
    free(*pL);
    *pL = NULL;
}

int length(List L){
    return L-&gt;length;
}

int index(List L){
    if (L-&gt;cursor == NULL){
        return -1;
    }
    return L-&gt;index;
}

int front(List L){
    if (length &lt;= 0){

        exit(EXIT_FAILURE);
    }
    return L-&gt;front-&gt;data;
}

int back(List L){
    if (length &lt;= 0){

        exit(EXIT_FAILURE);
    }
    return L-&gt;back-&gt;data;
}

int get(List L){
    if (length &lt;= 0 || index &lt; 0){

        exit(EXIT_FAILURE);
    }
    return L-&gt;cursor-&gt;data;
}

bool equals(List A, List B){
    if (A-&gt;length != B-&gt;length){
        return false;
    }
    moveFront(A);
    moveFront(B);
    for(int i = 0; i &lt; A-&gt;length; i++){
        if (A-&gt;cursor-&gt;data != B-&gt;cursor-&gt;data){
            return false;
        }
        moveNext(A);
        moveNext(B);
    }
    return true;
}


void clear(List L){ 
    while(L-&gt;length &gt; 0){
        
        deleteFront(L);
    }
    L-&gt;front = NULL;
    L-&gt;back = NULL;
    L-&gt;cursor = NULL;
    L-&gt;length = 0;
    L-&gt;index = -1;

}

void set(List L, int x){
<a name="0"></a><font color="#FF0000"><a href="match229-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_5.gif"/></a>

    L-&gt;cursor-&gt;data = x;
}

void moveFront(List L){
    if (L-&gt;length != 0){
        L-&gt;cursor = L-&gt;front;
    }
    L-&gt;index = 0;
}

void moveBack(List L){
    if (L-&gt;length != 0){
        L-&gt;cursor = L-&gt;back;
    }
    L-&gt;index = L-&gt;length - 1;
}

void moveNext(List L){
    // precondition to check if cursor == NULL
    if(L-&gt;cursor == NULL){
</font>        return;
    }
    if (L-&gt;cursor != L-&gt;back){
        L-&gt;cursor = L-&gt;cursor-&gt;next;
        L-&gt;index++;
    } else{
        L-&gt;cursor = NULL;
        L-&gt;index = -1;
    }
}

void movePrev(List L){
    if(L-&gt;cursor == NULL){
        return;
    }
    if (L-&gt;cursor != L-&gt;front){
        L-&gt;cursor = L-&gt;cursor-&gt;prev;
        L-&gt;index--;
    } else{
        L-&gt;cursor = NULL;
        L-&gt;index = -1;
    }
}

void prepend(List L, int x){
    Node N = newNode(x);
    if(L == NULL){
        printf("List Error: Its null");
        exit(EXIT_FAILURE);
    }
    N-&gt;next = L-&gt;front;
    L-&gt;front = N;
    if(L-&gt;length != 0){
        N-&gt;next-&gt;prev = N;
        
    }
    else{
        L-&gt;back = N;
    }

    if (L-&gt;index &gt;= 0){
        L-&gt;index++;
    }
    L-&gt;length++;
}

void append(List L, int x){
    Node N = newNode(x);
    if(L == NULL){
        printf("List Error: Its null");
        exit(EXIT_FAILURE);
    }
    N-&gt;prev = L-&gt;back;
    L-&gt;back = N;
    if(L-&gt;length != 0){
        N-&gt;prev-&gt;next = N;
        
    }
    else{
<a name="2"></a><font color="#0000FF"><a href="match229-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_2.gif"/></a>

        L-&gt;front = N;
    }
    L-&gt;length++;
}

void insertBefore(List L, int x){
    if(L-&gt;length &lt;= 0 || L-&gt;index &lt; 0){
        exit(EXIT_FAILURE);
</font>    }
    Node N = newNode(x);

    if (L-&gt;cursor == L-&gt;front){
        N-&gt;next = L-&gt;front;
        L-&gt;front = N;
        N-&gt;next-&gt;prev = N;
    }else{

<a name="3"></a><font color="#00FFFF"><a href="match229-1.html#3" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_3_2.gif"/></a>

        L-&gt;cursor-&gt;prev-&gt;next = N; //prev Node next to new Node
        N-&gt;prev = L-&gt;cursor-&gt;prev; //New node prev to prev Node
        L-&gt;cursor-&gt;prev = N;
        N-&gt;next = L-&gt;cursor;
    }
    if(L-&gt;index != -1){
</font><a name="4"></a><font color="#FF00FF"><a href="match229-1.html#4" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_4_2.gif"/></a>

        L-&gt;index++;
    }
    L-&gt;length++;
}

void insertAfter(List L, int x){
    if(L-&gt;length &lt;= 0 || L-&gt;index &lt; 0){
</font>        exit(EXIT_FAILURE);
    }
    Node N = newNode(x);

    if (L-&gt;cursor == L-&gt;back){
        N-&gt;prev = L-&gt;back;
        L-&gt;back = N;
        N-&gt;prev-&gt;next = N;
    }else{
        L-&gt;cursor-&gt;next-&gt;prev = N; //next Node prev to new Node
        N-&gt;next = L-&gt;cursor-&gt;next; //New node next to next Node
<a name="5"></a><font color="#FF0000"><a href="match229-1.html#5" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_2.gif"/></a>

        L-&gt;cursor-&gt;next = N;
        N-&gt;prev = L-&gt;cursor;
    }

    L-&gt;length++;
}

void deleteFront(List L){
    Node toDelete = L-&gt;front;
</font>    if (L-&gt;length &lt;= 0){
        exit(EXIT_FAILURE);
    }
    if (L-&gt;length &gt; 1)
    {
        L-&gt;front-&gt;next-&gt;prev = NULL;
    } else{
        L-&gt;back = NULL;
    }

    if (L-&gt;cursor == L-&gt;front){
        L-&gt;cursor = NULL;
        L-&gt;index = -1;
    }
    if(L-&gt;cursor != NULL){
        L-&gt;index--;
    }
    L-&gt;front = L-&gt;front-&gt;next;
    freeNode(&amp;toDelete);
    L-&gt;length--;
}

void deleteBack(List L){
    Node toDelete = L-&gt;back;
    if (L-&gt;length &lt;= 0){
        exit(EXIT_FAILURE);
    }

    if (L-&gt;length &gt; 1)
    {
        L-&gt;back-&gt;prev-&gt;next = NULL;
    } else{
        L-&gt;front = NULL;
    }

    if (L-&gt;cursor == L-&gt;back){
        L-&gt;cursor = NULL;
        L-&gt;index = -1;
    }
    L-&gt;back = L-&gt;back-&gt;prev;
    freeNode(&amp;toDelete);
    L-&gt;length--;
}

void delete(List L){
    if (L-&gt;length &lt;= 0 || L-&gt;index &lt; 0){
        exit(EXIT_FAILURE);
    }
    if(L-&gt;length == 1){
        L-&gt;front = NULL;
        L-&gt;back = NULL;

    }
    //if cursor at end
    else if (L-&gt;cursor-&gt;next == NULL){
        L-&gt;cursor-&gt;prev-&gt;next = NULL;
        L-&gt;back = L-&gt;cursor-&gt;prev;
    } 
    //if cursor at beginning
    else if(L-&gt;cursor-&gt;prev == NULL){
        L-&gt;cursor-&gt;next-&gt;prev = NULL;
        L-&gt;front = L-&gt;cursor-&gt;next;
    }
    else{
        L-&gt;cursor-&gt;next-&gt;prev = L-&gt;cursor-&gt;prev;
        L-&gt;cursor-&gt;prev-&gt;next = L-&gt;cursor-&gt;next;
    }


<a name="6"></a><font color="#00FF00"><a href="match229-1.html#6" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_2.gif"/></a>

    free(L-&gt;cursor);
    L-&gt;cursor = NULL;
    L-&gt;index = -1;

    L-&gt;length--;
}

void printList(FILE* out, List L){
    moveFront(L);
</font>    for (int i = 0; i &lt; L-&gt;length; i++)
    {
        fprintf(out, "%d ", get(L));
        moveNext(L);
    }

}

List copyList(List L){
    List K = newList();
    Node N = L-&gt;front;
    for (int i = 0; i &lt; L-&gt;length; i++)
    {
        append(K, N-&gt;data);
        N = N-&gt;next;
    }
    return K;
    
}


</pre>
</body>
</html>

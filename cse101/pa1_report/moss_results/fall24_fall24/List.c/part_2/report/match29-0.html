<html>
<head>
<title>/fall24/ncheblok/pa1/List.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/ncheblok/pa1/List.c<p></p><pre>
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match29-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

struct Element
{
    int data;
    Element* previous;
    Element* next;
};

// Constructors-Destructors ---------------------------------------------------
void MyprintList(List L)
{
    Element* e = L-&gt;head;
    while (e != NULL)
    {
        printf("%i - ", e-&gt;data);
        e = e-&gt;next;
    }
    printf("\n\n");
}

List newList(void)
{
    List l = calloc(1, sizeof(ListObj));
    return l;
}
void freeList(List* pL)
{
    if (*pL)
    {
        Element* e = (*pL)-&gt;head;
        if (e != NULL)
        {
            do
            {
                Element* next = e-&gt;next;
                free(e);
                e = next;
            } while (e);
        }
        free((*pL));
    }
}

int length(List L)
{
    if (!L) return 0;
    Element* e = L-&gt;head;
    if (!e) return 0;
    int i = 0;
    while (e-&gt;next != NULL)
    {
        e = e-&gt;next;
        i++;
    }
    return i + 1;
}
int index(List L)
{
    Element* e = L-&gt;head;
    if (!e || !L-&gt;cursor) return -1;
    int i = 0;
    while (e != L-&gt;cursor)
    {
        e = e-&gt;next;
        i++;
    }
    return i;
}
int front(List L)
{
    return L-&gt;head-&gt;data;
}
int back(List L)
{
    return L-&gt;back-&gt;data;
}
int get(List L)
{
    return L-&gt;cursor-&gt;data;
}
bool equals(List A, List B)
{
    Element* a = A-&gt;head;
    Element* b = B-&gt;head;
    bool equal = true;
    while (equal)
    {
        if (a == NULL &amp;&amp; b == NULL) return true;
        if ((a-&gt;next == 0) != (b-&gt;next == 0)) return false;
        if (a-&gt;data != b-&gt;data) return false;
        //^^^^^ this checks if one list is longer than the other, and returns false if theyre not
        a = a-&gt;next;
        b = b-&gt;next;
    }
    return true;
}
// Manipulation procedures ----------------------------------------------------
void clear(List L)
{
    if (L-&gt;head)
    {
        L-&gt;cursor = L-&gt;head;
        while (L-&gt;cursor-&gt;next != NULL)
        {
            L-&gt;cursor = L-&gt;cursor-&gt;next;
            free(L-&gt;cursor-&gt;previous);
        }
        free(L-&gt;cursor);
        L-&gt;cursor = NULL;
        L-&gt;head = NULL;
        L-&gt;back = NULL;
    }
}
void set(List L, int x)
{
    L-&gt;cursor-&gt;data = x;
}
void moveFront(List L)
{
    L-&gt;cursor = L-&gt;head;
}
void moveBack(List L)
{
    L-&gt;cursor = L-&gt;back;
}
void movePrev(List L)
{
    if (L-&gt;cursor) L-&gt;cursor = L-&gt;cursor-&gt;previous;
}
void moveNext(List L)
{
    if (L-&gt;cursor) L-&gt;cursor = L-&gt;cursor-&gt;next;
}
void prepend(List L, int x)
{
    Element* e = calloc(1, sizeof(Element));
    if (L-&gt;back == NULL)
    {
        L-&gt;back = e;
    }
    if (L-&gt;head == NULL)
    {
        L-&gt;head = e;
    }
    else
    {
        e-&gt;next = L-&gt;head;
        L-&gt;head-&gt;previous = e;
        L-&gt;head = e;
    }
    e-&gt;data = x;
}
void append(List L, int x)
{
    Element* e = calloc(1, sizeof(Element));
    if (L-&gt;head == NULL)
    {
        L-&gt;head = e;
    }
    if (L-&gt;back == NULL)
    {
        L-&gt;back = e;
    }
    else
    {
        e-&gt;previous = L-&gt;back;
        L-&gt;back-&gt;next = e;
        L-&gt;back = e;
    }
    e-&gt;data = x;
}
void insertBefore(List L, int x)
{
    Element* e = calloc(1, sizeof(Element));
    e-&gt;data = x;
    if (length(L) == 1)
    {
        L-&gt;head-&gt;previous = e;
        e-&gt;next = L-&gt;cursor;
        L-&gt;head = e;
        return;
    }

    if (L-&gt;cursor-&gt;next == NULL) // last in the list
    {
        e-&gt;next = L-&gt;cursor;
        e-&gt;previous = L-&gt;cursor-&gt;previous;
        L-&gt;cursor-&gt;previous-&gt;next = e;
        L-&gt;cursor-&gt;previous = e;
        return;
    }
    if (L-&gt;cursor-&gt;previous == NULL) // first in the list
    {
        e-&gt;next = L-&gt;cursor;
        L-&gt;cursor-&gt;previous = e;
        L-&gt;head = e;
        return;
    }
    // all else
    e-&gt;next = L-&gt;cursor;
    e-&gt;previous = L-&gt;cursor-&gt;previous;
    L-&gt;cursor-&gt;previous-&gt;next = e;
    L-&gt;cursor-&gt;previous = e;
}
void insertAfter(List L, int x)
{
    Element* e = calloc(1, sizeof(Element));
    e-&gt;data = x;
    if (length(L) == 1)
    {
        L-&gt;head-&gt;next = e;
        e-&gt;previous = L-&gt;cursor;
        L-&gt;back = e;
        return;
    }

    if (L-&gt;cursor-&gt;next == NULL) // last in the list
    {
        e-&gt;previous = L-&gt;cursor;
        L-&gt;cursor-&gt;next = e;
        L-&gt;back = e;
        return;
    }
    if (L-&gt;cursor-&gt;previous == NULL) // first in the list
    {
        e-&gt;next = L-&gt;cursor-&gt;next;
        e-&gt;previous = L-&gt;cursor-&gt;previous;
        L-&gt;cursor-&gt;next-&gt;previous = e;
        L-&gt;cursor-&gt;next = e;
        return;
    }
    // all else
    e-&gt;previous = L-&gt;cursor;
    e-&gt;next = L-&gt;cursor-&gt;next;
    L-&gt;cursor-&gt;next-&gt;previous = e;
    L-&gt;cursor-&gt;next = e;
}
void deleteFront(List L)
{
    if (L-&gt;cursor == L-&gt;head) L-&gt;cursor = NULL;
    if (length(L) == 0)
    {
        return;
    }
    else if (length(L) == 1)
    {
        free(L-&gt;head);
        L-&gt;head = NULL;
        L-&gt;back = NULL;
        L-&gt;cursor = NULL;
    }
    Element* e = L-&gt;head-&gt;next;
    e-&gt;previous = NULL;
    free(L-&gt;head);
    L-&gt;head = e;
}
void deleteBack(List L)
{
    if (L-&gt;cursor == L-&gt;back) L-&gt;cursor = NULL;
    if (length(L) == 0)
    {
        return;
    }
    else if (length(L) == 1)
    {
        free(L-&gt;head);
        L-&gt;head = NULL;
        L-&gt;back = NULL;
        L-&gt;cursor = NULL;
    }
    else
    {
        Element* e = L-&gt;back-&gt;previous;
        e-&gt;next = NULL;
        free(L-&gt;back);
        L-&gt;back = e;
    }
}
void delete(List L)
{
    if (length(L) == 1)
    {
        free(L-&gt;head);
        L-&gt;head = NULL;
        L-&gt;back = NULL;
        L-&gt;cursor = NULL;
        return;
    }

    if (L-&gt;cursor-&gt;next == NULL) // last element
    {
        L-&gt;cursor-&gt;previous-&gt;next = NULL; // now points to nothing, indicating that it's the new last
        L-&gt;back = L-&gt;cursor-&gt;previous; // update the back of the list
        free(L-&gt;cursor);
        L-&gt;cursor = NULL;
        return;
    }

    if (L-&gt;cursor-&gt;previous == NULL) // first element
    {
        L-&gt;cursor-&gt;next-&gt;previous = NULL; // now points-back to nothing, indicating that it's the new first
        L-&gt;head = L-&gt;cursor-&gt;next; // update the back of the list
        free(L-&gt;cursor);
        L-&gt;cursor = NULL;
        return;
    }

    // Any other element
    L-&gt;cursor-&gt;previous-&gt;next = L-&gt;cursor-&gt;next;
    L-&gt;cursor-&gt;next-&gt;previous = L-&gt;cursor-&gt;previous;
    free(L-&gt;cursor);
    L-&gt;cursor = NULL;
}
void printList(FILE* out, List L)
{
    Element* e = L-&gt;head;
    while (e-&gt;next != NULL)
    {
        fprintf(out, "%i", e-&gt;data);
        e = e-&gt;next;
    }
}
List copyList(List L)
{
    List C = calloc(1, sizeof(ListObj));
    if (!length(L)) return C;
    Element* i = L-&gt;head;
    while (i != NULL)
    {
        append(C, i-&gt;data);
        i = i-&gt;next;
</font>    }
    return C;
}</pre>
</body>
</html>

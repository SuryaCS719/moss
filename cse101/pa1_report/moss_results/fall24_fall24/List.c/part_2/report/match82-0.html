<html>
<head>
<title>/fall24/tkodituw/pa1/List.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/tkodituw/pa1/List.c<p></p><pre>
#include&lt;stdbool.h&gt;
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include"List.h"

<a name="1"></a><font color="#00FF00"><a href="match82-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_23.gif"/></a>

List newList(void){
    List L=(List)malloc(sizeof(ListObj));
    L-&gt;front=NULL;
    L-&gt;back=NULL;
    L-&gt;cursor=NULL;
    L-&gt;length=0;
    L-&gt;index=-1;
    return L;
}

void freeList(List* pL){
    List L=*pL;
    Node current=L-&gt;front;
    while(current!=NULL){
        Node nextNode=current-&gt;next;
        free(current);
        current=nextNode;
    }
    L-&gt;front=NULL;
    L-&gt;back=NULL;
    L-&gt;cursor=NULL;
    L-&gt;length=0;
    L-&gt;index=-1;
    free(L);
    *pL=NULL;
}

int length(List L){
    return L-&gt;length;
}

int index(List L){
    return L-&gt;index;
}

int front(List L){
    if(L-&gt;length&lt;=0){
        fprintf(stderr, "Integer List Error: List does not have any elements");
        exit(EXIT_FAILURE);
    }
    return L-&gt;front-&gt;data;
}

int back(List L){
    if(L-&gt;length&lt;=0){
        fprintf(stderr, "Integer List Error: List does not have any elements");
        exit(EXIT_FAILURE);
    }
    return L-&gt;back-&gt;data;
}

int get(List L){
    if(L-&gt;length&lt;=0){
        fprintf(stderr, "Integer List Error: List does not have any elements");
        exit(EXIT_FAILURE);
    }
    if(index(L)==-1){
        fprintf(stderr, "Integer List Error: Cursor is not highlighting an element");
        exit(EXIT_FAILURE);        
    }
    return L-&gt;cursor-&gt;data;
}

bool equals(List A, List B){
    if(A==NULL||B==NULL){
        return false;
    }
    if(A-&gt;length!=B-&gt;length){
        return false;
    }
    Node acurr=A-&gt;front;
</font>    Node bcurr=B-&gt;front;
    while(acurr!=NULL &amp;&amp; bcurr!=NULL){
<a name="2"></a><font color="#0000FF"><a href="match82-1.html#2" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_11.gif"/></a>

        if(acurr-&gt;data!=bcurr-&gt;data){
            return false;
        }
        acurr=acurr-&gt;next;
        bcurr=bcurr-&gt;next;
    }
    return true;
}

void clear(List L){
    if (L == NULL) return;
    Node current = L-&gt;front;
    while (current != NULL) {
        Node nextNode = current-&gt;next;
        free(current);
        current = nextNode;
    }
    L-&gt;front = NULL;
    L-&gt;back = NULL;
    L-&gt;cursor = NULL;
    L-&gt;length = 0;
    L-&gt;index=-1;
}

void set(List L, int x){
    if(L-&gt;length&gt;0 &amp;&amp; index(L)&gt;=0){
        L-&gt;cursor-&gt;data=x;
    }
}

void moveFront(List L){
    if(L-&gt;length&gt;0){
        L-&gt;cursor=L-&gt;front;
</font>        L-&gt;index=0;
    }
}

void moveBack(List L){
    if(L-&gt;length&gt;0){
<a name="0"></a><font color="#FF0000"><a href="match82-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_58.gif"/></a>

        L-&gt;cursor=L-&gt;back;
        L-&gt;index=((L-&gt;length)-1);
    }
}

void movePrev(List L){
    if(L-&gt;cursor==NULL){
        L-&gt;index=-1;
        return;
    }
    if(L-&gt;cursor==L-&gt;front){
        L-&gt;cursor=NULL;
        L-&gt;index=-1;
        return;
    }
    L-&gt;cursor=L-&gt;cursor-&gt;prev;
    L-&gt;index--;
}

void moveNext(List L){
    if(L-&gt;cursor==NULL){
        L-&gt;index=-1;
        return;
    }
    if(L-&gt;cursor==L-&gt;back){
        L-&gt;cursor=NULL;
        L-&gt;index=-1;
        return;
    }
    L-&gt;cursor=L-&gt;cursor-&gt;next;
    L-&gt;index++;
}

void prepend(List L, int x){
    Node newNode=(Node)malloc(sizeof(NodeObj));
    newNode-&gt;data=x;
    newNode-&gt;prev=NULL;
    newNode-&gt;next=L-&gt;front;
    if(L-&gt;length&gt;0){
        L-&gt;front-&gt;prev=newNode;
    }else{
        L-&gt;back=newNode;
    }
    L-&gt;front=newNode;
    L-&gt;length++;
}

void append(List L, int x){
    Node newNode=(Node)malloc(sizeof(NodeObj));
    newNode-&gt;data=x;
    newNode-&gt;next=NULL;
    newNode-&gt;prev=L-&gt;back;
    if(L-&gt;length&gt;0){
        L-&gt;back-&gt;next=newNode;
    }else{
        L-&gt;front=newNode;
    }
    L-&gt;back=newNode;
    L-&gt;length++;
}

void insertBefore(List L, int x){
    if(L-&gt;length&gt;0 &amp;&amp; index(L)&gt;=0){
        Node newNode=(Node)malloc(sizeof(NodeObj));
        newNode-&gt;data=x;
        newNode-&gt;prev=L-&gt;cursor-&gt;prev;
        newNode-&gt;next=L-&gt;cursor;
        L-&gt;length++;
    }
}

void insertAfter(List L, int x){
    if(L-&gt;length&gt;0 &amp;&amp; index(L)&gt;=0){
        Node newNode=(Node)malloc(sizeof(NodeObj));
        newNode-&gt;data=x;
        newNode-&gt;next=L-&gt;cursor-&gt;next;
        newNode-&gt;prev=L-&gt;cursor;
        L-&gt;length++;
    }
}

void deleteFront(List L){
    if(L-&gt;length&gt;0){
        Node oldFront=L-&gt;front;
        L-&gt;front=oldFront-&gt;next;
        if(L-&gt;front!=NULL){
            L-&gt;front-&gt;prev=NULL;
        }else{
            L-&gt;back=NULL;
        }
        free(oldFront);
        L-&gt;length--;
    }
}

void deleteBack(List L){
    if(L-&gt;length&gt;0){
        Node oldBack=L-&gt;back;
        L-&gt;back=oldBack-&gt;next;
        if(L-&gt;back!=NULL){
            L-&gt;back-&gt;prev=NULL;
        }else{
            L-&gt;front=NULL;
        }
        free(oldBack);
        L-&gt;length--;
    }
}

void delete(List L){
    if(L-&gt;length&gt;0){
        Node currentCursor = L-&gt;cursor;
        if (currentCursor-&gt;prev != NULL) {
            currentCursor-&gt;prev-&gt;next = currentCursor-&gt;next;
        } else {
            L-&gt;front = currentCursor-&gt;next;
        }
        if (currentCursor-&gt;next != NULL) {
            currentCursor-&gt;next-&gt;prev = currentCursor-&gt;prev;
        } else {
            L-&gt;back = currentCursor-&gt;prev;
        }
        free(currentCursor);
        L-&gt;cursor = NULL;
        L-&gt;length--;
    }
}

void printList(FILE* out, List L) {
    if (L == NULL) {
        fprintf(out, "List is NULL\n");
        return;
    }

    Node current = L-&gt;front;
    while (current != NULL) {
        fprintf(out, "%d", current-&gt;data);
        current = current-&gt;next;
        if (current != NULL) {
            fprintf(out, " ");
        }
    }
    fprintf(out, "\n");
</font>}
</pre>
</body>
</html>

<html>
<head>
<title>/fall24/nsaldanh/pa1/List.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nsaldanh/pa1/List.c<p></p><pre>
/***
* Naomi Saldanha // First and Last Name
* nsaldanh // UCSC UserID
* 2024 Fall CSE101 PA1 // Replace ID with assignment number 
* List.c // FileName
* List ADT // Description
***/ 

#include "List.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;

<a name="1"></a><font color="#00FF00"><a href="match34-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_21.gif"/></a>

typedef struct NodeObj* Node;

typedef struct NodeObj{
        int data;
        Node next;
        Node prev;
}NodeObj;

typedef struct ListObj* List;
typedef struct ListObj {
        Node front;
        Node back;
        Node cursor;
        int length;
	int index;
}ListObj;

Node newNode() {
	Node n = (Node)malloc(sizeof(struct NodeObj));
	if (n == NULL) {
		printf("Memory not properly allocated in newNode\n");
		exit(1);
	}
	n-&gt;data = 0;
	return n;
}

void deleteNode(Node n) {
	if(n!=NULL){
		free(n);
	}
}
List newList(void){
	List l = (List)malloc(sizeof(struct ListObj));
	if (l == NULL) {
		printf("Memory not properly allocated in newList\n");
		exit(1);
	}
	l-&gt;front = NULL;
	l-&gt;back = NULL;
	l-&gt;cursor = NULL;
	l-&gt;length = 0;
	l-&gt;index = -1;
	return l;
}

void freeList(List* pL){
	(*pL)-&gt;cursor = NULL;
	Node n = (*pL)-&gt;front;
	while (n!=NULL){
		Node e = n;
		n = n-&gt;next;
		free(e);
	}
	(*pL)-&gt;length = 0;
	(*pL)-&gt;index = -1;
	(*pL)-&gt;cursor = NULL;
	free(*pL);
	*pL = NULL;
}

int length(List L){
	return L-&gt;length;
}

int index(List L){
	return L-&gt;index;
}

int front(List L){
	assert(L-&gt;length&gt;0);
	return L-&gt;front-&gt;data;
}

int back(List L){
	assert(L-&gt;length&gt;0);
	return L-&gt;back-&gt;data;
}

int get(List L){
	assert(L-&gt;length&gt;0);
	assert(L-&gt;index&gt;=0);
	return L-&gt;cursor-&gt;data;
}

bool equals(List A, List B){
	if(A-&gt;length != B-&gt;length){
		return false;
</font>	}
	Node nA = A-&gt;front;
	Node nB = B-&gt;front;
	while(nA!=NULL){
<a name="2"></a><font color="#0000FF"><a href="match34-0.html#2" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_2_9.gif"/></a>

		if(nA-&gt;data!=nB-&gt;data){
			return false;
		}
		nA = nA-&gt;next;
		nB = nB-&gt;next;
	}
	return true;
}

void clear(List L){
	Node n = L-&gt;front;
        while (n!=NULL){
                n-&gt;data = -1;
		Node save = n;
               	n = n-&gt;next;
		free(save);
	}
	free(n);
	L-&gt;front = NULL;
	L-&gt;back = NULL;
	L-&gt;cursor = NULL;
	L-&gt;length = 0;
	L-&gt;index = -1;
}

void set(List L, int x){
	assert(L-&gt;index != -1);
	L-&gt;cursor-&gt;data = x;
}

void moveFront(List L) {
    	if (L-&gt;length &gt; 0) {
        	L-&gt;cursor = L-&gt;front;
        	L-&gt;index = 0;
</font>    	}
}

void moveBack(List L) {
<a name="0"></a><font color="#FF0000"><a href="match34-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_63.gif"/></a>

    	if (L-&gt;length &gt; 0) {
        	L-&gt;cursor = L-&gt;back;
        	L-&gt;index = L-&gt;length - 1;
    	}
}

void moveNext(List L) {
    	bool back = (L-&gt;index+1 &lt; L-&gt;length);
  	if (back &amp;&amp; L-&gt;cursor != NULL) {
        	L-&gt;cursor = L-&gt;cursor-&gt;next;
        	L-&gt;index += 1;
    	} 
	else {
        	L-&gt;cursor = NULL;
        	L-&gt;index = -1;
    	}
}

void movePrev(List L) {
    	if (L-&gt;cursor != NULL &amp;&amp; L-&gt;index &gt; 0) {
        	L-&gt;cursor = L-&gt;cursor-&gt;prev;
        	L-&gt;index -= 1;
    	} 
	else {
        	L-&gt;cursor = NULL;
        	L-&gt;index = -1;
    	}
}

void prepend(List L, int x){
	Node n = newNode();
	assert(n!=NULL);
	n-&gt;data = x;
	assert(L-&gt;length&gt;=0);
	n-&gt;prev = NULL;
	if(L-&gt;length&gt;0){
		n-&gt;next = L-&gt;front;
		L-&gt;front-&gt;prev = n;
		L-&gt;front = L-&gt;front-&gt;prev;
		if(index&gt;=0){
			L-&gt;index+=1;
		}
	}
	else{
		n-&gt;next = NULL;
		L-&gt;front = n;
		L-&gt;back = n;
	}
	(L-&gt;length)+=1;
}

void append(List L, int x) {
	Node n = newNode();
	assert(n != NULL);  
	n-&gt;data = x;
	n-&gt;next = NULL; 
	if (L-&gt;length &gt; 0) {  
		n-&gt;prev = L-&gt;back;  
        	L-&gt;back-&gt;next = n;  
        	L-&gt;back = L-&gt;back-&gt;next;	
    	}
	else {  
        	n-&gt;prev = NULL;  
		L-&gt;front = n; 
		L-&gt;back = n;
    	}
	L-&gt;length+=1; 
}


void insertBefore(List L, int x){
	Node n = newNode();
        assert(n!=NULL);
        n-&gt;data = x;
        assert(L-&gt;length&gt;0);
	assert(L-&gt;index&gt;=0);
        if(L-&gt;cursor-&gt;prev == NULL){
                n-&gt;next = L-&gt;cursor;
		n-&gt;prev = NULL;
                L-&gt;cursor-&gt;prev = n;	
		L-&gt;front = n;
        }
        else{
		n-&gt;next = L-&gt;cursor;
		n-&gt;prev = L-&gt;cursor-&gt;prev;
		Node save = L-&gt;cursor-&gt;prev;
		save-&gt;next = n;
		L-&gt;cursor-&gt;prev = n;
	}
	L-&gt;index+=1;
        L-&gt;length+=1;
}

void insertAfter(List L, int x){
        //Node n = newNode();
        //assert(n!=NULL);
        //n-&gt;data = x;
        assert(L-&gt;length&gt;0);
	assert(L-&gt;index&gt;=0);
        if(L-&gt;length-1==L-&gt;index){
		append(L, x);
	}
	else{
		Node n = newNode();
        	assert(n!=NULL);
        	n-&gt;data = x;
                n-&gt;prev = L-&gt;cursor;
                n-&gt;next = L-&gt;cursor-&gt;next;
                Node save = n-&gt;next;
		L-&gt;cursor-&gt;next = n;
		if(save!=NULL){
			save-&gt;prev = n;
		}
		L-&gt;length+=1;
	}
}

void deleteFront(List L) {
    	assert(L-&gt;length &gt; 0);
    	Node n = L-&gt;front;
	if(L-&gt;index&gt;=0){
                L-&gt;index-=1;
        }
    	if (L-&gt;length == 1) { 
        	L-&gt;front = L-&gt;back = NULL;
    	} 
	else {
        	L-&gt;front = L-&gt;front-&gt;next;
        	L-&gt;front-&gt;prev = NULL;
    	}
    	free(n);
    	L-&gt;length -= 1;
}

void deleteBack(List L) {
    	assert(L-&gt;length &gt; 0);
    	Node n = L-&gt;back;
	if(L-&gt;index==L-&gt;length-1){
		L-&gt;index = -1;
	}
    	if (L-&gt;length == 1) {  
        	L-&gt;front = L-&gt;back = NULL;
    	} 
	else {

		L-&gt;back = L-&gt;back-&gt;prev;
        	L-&gt;back-&gt;next = NULL;
    	}
    	free(n);
    	L-&gt;length -= 1;
}

void delete(List L) {
    	assert(L-&gt;length &gt; 0 &amp;&amp; L-&gt;index &gt;= 0);
    	Node n = L-&gt;cursor;
    	if (n == L-&gt;front) {
        	deleteFront(L);
    	} 
	else if (n == L-&gt;back) {
        	deleteBack(L);
    	} 
    	else {
		Node save = n-&gt;prev;
		if(save!=NULL){
			save-&gt;next = n-&gt;next;
		}
		save = n-&gt;next;
		if(save!=NULL){
			save-&gt;prev = n-&gt;prev;
		}
        	free(n);
        	L-&gt;length -= 1;
   	 }
    	L-&gt;cursor = NULL;
    	L-&gt;index = -1;
}


void printList(FILE* out, List L) {
    	Node n = L-&gt;front;
    	while (n != NULL) {
        	fprintf(out, "%d", n-&gt;data);
        	fprintf(out, " "); 
        	n = n-&gt;next;
    	}
    	fprintf(out, "\n"); 
}


List copyList(List L){
	List copyL = newList();
	Node n = L-&gt;front;
	while(n!=NULL){
</font>		append(copyL, n-&gt;data);
		n = n-&gt;next;
	}
	return copyL;
}	
</pre>
</body>
</html>

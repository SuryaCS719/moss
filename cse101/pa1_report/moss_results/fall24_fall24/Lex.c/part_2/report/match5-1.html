<html>
<head>
<title>/fall24/mibanez1/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/mibanez1/pa1/Lex.c<p></p><pre>
/***
* Marshall Ibanez
* mibanez1
* 2024 Fall CSE101 pa1
* Lex.c
* Indirectly sorts a list given by the user and prints it out
***/

#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match5-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int main(int argc, char* argv[])
{   
    if (argc != 3)
    {
        fprintf(stderr, "Usage: ./Lex [INPUT FILE].txt [OUTPUT FILE].txt\n");
        return(1);
    }
    FILE* input = fopen(argv[1], "r");
    if (input == NULL)
    {
        fprintf(stderr, "Input file not found!\n");
        return(1);
    }

    FILE* output = fopen(argv[2], "w");
    if (output == NULL)
    {
        fprintf(stderr, "Error");
        return(1);
    }

    char p; //Contains the current char in the file
    int num_rows = 0; //Number of unique entries in the file
    int max_length = 0; //Length of largest string in the file
    int current_length = 0; //Length of current string in the file

    while ((p = fgetc(input)) != EOF)
    {
        if (p == '\n') 
        {
            num_rows++;
            if (current_length &gt; max_length) 
            {
                max_length = current_length;
            }
            current_length = 0;
        } 
        else 
        {
            current_length++;
        }
    }

    if (current_length &gt; 0)
    {
        num_rows++;
        if (current_length &gt; max_length)
        {
            max_length = current_length;
        }
    }

    char** array = (char**)malloc(num_rows * sizeof(char*));
    for (int i = 0; i &lt; num_rows; i++)
    {
        array[i] = (char*)malloc((max_length + 2) * sizeof(char)); //Plus one because of the NULL char
    }

    fseek(input, 0, SEEK_SET);

    for (int i = 0; i &lt; num_rows; i++)
    {
        fgets(array[i], max_length + 2, input); //Because of the newline and the null terminator
        for (int j = 0; j &lt; max_length + 1; j++) //Becuase of the newline
        {
            if (array[i][j] == '\n')
            {
                array[i][j] = '\0';
                break;
            }
            if (j == max_length) // If it reaches the end, then it overwrites the newline
            {
                array[i][j] = '\0';
            }
        }
    }

    List list = newList(); // List that will act as a sorted version of array

    int index = 0; //Initializes the data in the list with an incrimenting counter
    for (int i = 0; i &lt; num_rows; i++)
    {
        append(list, index);
        index++;
    }

    //Bubble sort
    for (int i = 0; i &lt; num_rows - 1; i++)
    {
        moveFront(list);
        for (int j = 0; j &lt; num_rows - i - 1; j++)
        {
            int current = get(list); //Gets current data at pointer
            moveNext(list); //Moves next to get the data at j+1
            int next = get(list); //Data at j + 1
            
            if(strcmp(array[current], array[next]) &gt; 0)
            {
                set(list, current);
                movePrev(list);
                set(list, next);
                moveNext(list);                
            }
        }
    }

    moveFront(list);
    for (int i = 0; i &lt; num_rows; i++)
    {
        fprintf(output, "%s\n", array[get(list)]);
        moveNext(list);
    }

    for (int i = 0; i &lt; num_rows; i++)
    {
        free(array[i]);
    }
    free(array);

    fclose(input);
    fclose(output);
    freeList(&amp;list);

    return 0;
</font>}
</pre>
</body>
</html>

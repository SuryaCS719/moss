<html>
<head>
<title>/fall24/fzeng3/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/fzeng3/pa1/Lex.c<p></p><pre>
//
//  Author: Frank Zeng
//  Student ID: 2062454
//  Assignment: pa1
//

#include "List.h"
#include &lt;string.h&gt;

<a name="0"></a><font color="#FF0000"><a href="match93-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_93.gif"/></a>

const int MAX_LENGTH = 128;

int main(int argc, char **argv) {
    if (argc != 3) {
        fprintf(stderr, "argument number not equals 2!\n");
        return 1;
    }

    FILE *fin = fopen(argv[1], "r");

    if(fin == NULL) {
        fprintf(stderr, "invalid input file!\n");
        return 1;
    }

    FILE *fout = fopen(argv[2], "w");
    if (fout == NULL) {
        fprintf(stderr, "Invalid output file!\n");
        return 1;
    }

    int line_count = 0;
    char buff[128];
    while (fgets(buff, 128, fin)) line_count ++;

    char **str = (char **) malloc (sizeof (char *) * line_count);

    rewind(fin);
    for (int i = 0; i &lt; line_count; i ++) {
        str[i] = malloc(sizeof (char) * MAX_LENGTH);
        fgets(str[i], MAX_LENGTH, fin);
    }

    List list = newList();

    append(list, 0);

    //printf("%d\n", line_count);

    for (int i = 1; i &lt; line_count; i ++) {
        // printList(stdout, list);
        // printf("\n");

        if (strcmp(str[i], str[back(list)]) &gt;= 0) {
            append(list, i);
            continue;
        }

        moveFront(list);
        while (strcmp(str[i], str[get(list)]) &gt; 0 &amp;&amp; index(list) != length(list) - 1) {
            moveNext(list);
        }
        insertBefore(list, i);
    }

    // printList(stdout, list);
    // printf("\n");

    moveFront(list);
    while (index(list) &gt;= 0) {
        fprintf(fout, "%s", str[get(list)]);
        moveNext(list);
    }

    freeList(&amp;list);
    for(int i = 0; i &lt; line_count; i ++) {
</font>        free(str[i]);
    }
    free(str);
    fclose(fin);
    fclose(fout);
    return 0;
}

</pre>
</body>
</html>

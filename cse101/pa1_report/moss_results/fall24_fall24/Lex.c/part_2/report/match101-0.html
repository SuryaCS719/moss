<html>
<head>
<title>/fall24/pbuddhi/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/pbuddhi/pa1/Lex.c<p></p><pre>
//Preetham Buddhi
//pbuddhi
//pa1

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;stdbool.h&gt;
#include "List.h"

<a name="1"></a><font color="#00FF00"><a href="match101-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_20.gif"/></a>

extern char* strdup(const char*);

int main(int argc, char* argv[]){
  int line_count;
  FILE *in, *out;
  char line[300];

  if (argc != 3){
    printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
    exit(1);
  }

  in = fopen(argv[1], "r");
  if(in == NULL){
</font>    printf("Unable to open file %s for reading\n", argv[1]);
    exit(1);
  }

<a name="0"></a><font color="#FF0000"><a href="match101-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_64.gif"/></a>

  out = fopen(argv[2], "w");
  if( out==NULL ){
      printf("Unable to open file %s for writing\n", argv[2]);
      exit(1);
  }

  line_count = 0;
  while(fgets(line, 300, in) != NULL){
    line_count++;
  }
  
  fclose(in);

  char** phrases = calloc(line_count, sizeof(char*));

  in = fopen(argv[1], "r");
  int counter = 0;
  while(fgets(line, 300, in) != NULL){
    phrases[counter] = strdup(line);
    counter++;
  }
  fclose(in);

  List sorted = newList();
  
  for (int i = 0; i &lt; line_count; i++){
    if (length(sorted) &lt;= 0){
      append(sorted, i);
    } else {
      bool inserted = false;
      moveFront(sorted);
      while(index(sorted) &gt;= 0){
        if(strcmp(phrases[i], phrases[get(sorted)]) &lt;= 0){
          insertBefore(sorted, i);
	  inserted = true;
	  break;
	}
	moveNext(sorted);
      }
      if(inserted == false){
        append(sorted, i);
      }
    }
  }

  moveFront(sorted);
  while(index(sorted) &gt;= 0){
    fprintf(out, "%s", phrases[get(sorted)]);
    moveNext(sorted);
  }

  fclose(out);
  freeList(&amp;sorted);
  
  for(int i = 0; i &lt; line_count; i++){
</font>    free(phrases[i]);
  }
  free(phrases);

  return 0;
}
</pre>
</body>
</html>

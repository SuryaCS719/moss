<html>
<head>
<title>/fall24/aagarw48/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/aagarw48/pa1/Lex.c<p></p><pre>
/***
* Anshika Agarwal // First and Last Name
* aagarw48 // UCSC UserID
* 2024 Fall CSE101 PA1 // Replace ID with assignment number 
* Lex.c // FileName
* Sorts index List and indirectly alphabetizes strings // Description
***/ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 400

<a name="1"></a><font color="#00FF00"><a href="match96-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_14.gif"/></a>

int main(int argc, char* argv[]) {
    int lineCount = 0;
    FILE* in, *out;
    char line[MAX_LEN];
    if (argc != 3) {
        printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    in = fopen(argv[1], "r");
</font>      if( in==NULL ){
      printf("Unable to open file %s for reading\n", argv[1]);
      exit(1);
   }

   out = fopen(argv[2], "w");
<a name="0"></a><font color="#FF0000"><a href="match96-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_67.gif"/></a>

   if( out==NULL ){
      printf("Unable to open file %s for writing\n", argv[2]);
      exit(1);
   }

    while (fgets(line, MAX_LEN, in) != NULL) {
        lineCount++;
    }
    rewind(in);
    char** array = malloc(lineCount * sizeof(char*));
    int i = 0;
    while (fgets(line, MAX_LEN, in) != NULL) {
        line[strcspn(line, "\n")] = '\0';
        array[i] = malloc((strlen(line)+1) * sizeof(char));
        strcpy(array[i], line);
        i++;
    }
    List L = newList();
    for (int i = 0; i &lt; lineCount; i++) {
        char* curr = array[i];
        if (length(L) == 0) {
            append(L, i);
        }
        else {
            moveFront(L);

        while (index(L) &gt;= 0) {
            int ind = get(L);
            if (strcmp(curr, array[ind]) &lt; 0) {
                break;
            }
            moveNext(L);
        }
        if (index(L) &lt; 0) {
            append(L, i);
        }
        else {
            insertBefore(L, i);
        }
        }
    }
    moveFront(L);
    for (int i = 0; i &lt; lineCount; i++) {
        fprintf(out, "%s\n", array[get(L)]);
        moveNext(L);
    }
    // fprintf(out, "line count %d ", lineCount);
    for (int i = 0; i &lt; lineCount; i++) {
        free(array[i]);
</font>    }
    free(array);
    freeList(&amp;L);

    fclose(in);
    fclose(out);
    return (0);
}</pre>
</body>
</html>

<html>
<head>
<title>/fall24/pmaruwad/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/pmaruwad/pa1/Lex.c<p></p><pre>
/***************************************************************
Name: Pragya Maruwada
CruzID: pmaruwad
Assignment: PA1
Lex.c
****************************************************************/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"


#define MAX_LEN 255

int main(int argc, char* argv[]){
	if(argc != 3){
		fprintf(stderr, "Usage: %s &lt;input_file&gt; &lt;output_file&gt;\n", argv[0]);
		exit(1);
	}

	FILE* in = fopen(argv[1], "r");
	if (in == NULL){
		fprintf(stderr, "Unable to read from file, %s.\n", argv[1]);
		exit(1);
	}

<a name="0"></a><font color="#FF0000"><a href="match114-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_71.gif"/></a>

	FILE* out = fopen(argv[2], "w");
	if (out == NULL){
		fprintf(stderr, "Unable to write to file, %s.\n", argv[2]);
		fclose(in);
		exit(1);
	}

	


	char str[MAX_LEN];
	int lines = 0;
	while(fgets(str, MAX_LEN , in)!= NULL){
		lines++;
	}

	rewind(in);

	char** strArr = malloc(lines * sizeof(char*));

	if (strArr == NULL){
		fprintf(stderr, "Memory allocation failed.\n");
		fclose(in);
		fclose(out);
		exit(1);
	}


	for (int i = 0; i &lt; lines; i++){
		strArr[i] = malloc(MAX_LEN * sizeof(char));
		if (strArr[i] == NULL){
			fprintf(stderr, "Memory allocation failed.\n");
			fclose(in);
			fclose(out);
			exit(1);
		}

	List indexList = newList();

	 for (int i = 0; i &lt; lines; i++) {
		 moveBack(indexList);
		 while (index(indexList) &gt; -1 &amp;&amp; strcmp(strArr[i], strArr[get(indexList)]) &lt; 0) {
			 movePrev(indexList);
       		 } 
		 if (index(indexList) &gt; -1) {
            		insertAfter(indexList, i);
        	}	 
		 else {
            		prepend(indexList, i);
        	}
    	}

    	moveFront(indexList);
    	while (index(indexList) &gt; -1) {
        	fprintf(out, "%s", strArr[get(indexList)]);
        	moveNext(indexList);
    	}

    	for (int i = 0; i &lt; lines; i++) {
</font>        	free(strArr[i]);
    	}
    	free(strArr);
    	freeList(&amp;indexList);
    	fclose(in);
    	fclose(out);

    	return 0;
	
}

}
</pre>
</body>
</html>

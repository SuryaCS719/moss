<html>
<head>
<title>/fall24/sprothia/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/sprothia/pa1/Lex.c<p></p><pre>
//-----------------------------------------------------------------------------
// Siddharth Prothia 
// Lex.c
// sprothia
// pa1 
//-----------------------------------------------------------------------------
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;stdbool.h&gt;
#include&lt;string.h&gt;
#include"List.h"

#define MAX_LEN 1024

<a name="0"></a><font color="#FF0000"><a href="match78-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_63.gif"/></a>

int main(int argc, char * argv[]) {

   int line_count;
   FILE *in, *out;
   char line[MAX_LEN];

   if(argc != 3) {
      fprintf(stderr, "%s", "More or Less than 2 arguments were given!\n");
      exit(1);
   }

   in = fopen(argv[1], "r");
   if(in == NULL ){
      printf("Unable to open file %s for reading\n", argv[1]);
      exit(1);
   }

   out = fopen(argv[2], "w");
   if( out == NULL ){
      printf("Unable to open file %s for writing\n", argv[2]);
      fclose(in);
      exit(1);
   }

   line_count = 0;
   while( fgets(line, MAX_LEN, in) != NULL)  {
      line_count++;
   }

   printf("Number of lines: %d\n", line_count);

   char **strings = (char **)malloc(line_count * sizeof(char *));
   if(strings == NULL) {
      fprintf(stderr, "Memory allocation failed for allocating space for lines\n");
      exit(EXIT_FAILURE);
   }

   rewind(in);


   for (int i = 0; i &lt; line_count; i++) {
        fgets(line, MAX_LEN, in);
        line[strcspn(line, "\n")] = 0;
        strings[i] = malloc((strlen(line) + 1) * sizeof(char)); 
        strcpy(strings[i], line);
    }

   List myList = newList();


   for (int i = 0; i &lt; line_count; i++) {
        moveFront(myList);
        while (index(myList) &gt;= 0 &amp;&amp; strcmp(strings[i], strings[get(myList)]) &gt; 0) {
</font>            moveNext(myList);
        }
        if (index(myList) == -1) {
            append(myList, i);
        } else {
<a name="1"></a><font color="#00FF00"><a href="match78-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_24.gif"/></a>

            insertBefore(myList, i);
        }
    }
   
    moveFront(myList);
    while (index(myList) &gt;= 0) {
        fprintf(out, "%s\n", strings[get(myList)]);
        moveNext(myList);
    }
    
    fclose(out);
    printf("\n");

    out = fopen(argv[2], "r");

    while (fgets(line, MAX_LEN, out) != NULL) {
        printf("%s", line);
    }

   
   fclose(in);
   fclose(out);

   for(int j = 0; j &lt; line_count; j++) {
    free(strings[j]);
   }

   free(strings);
   freeList(&amp;myList);
</font>

   return(0);
}</pre>
</body>
</html>

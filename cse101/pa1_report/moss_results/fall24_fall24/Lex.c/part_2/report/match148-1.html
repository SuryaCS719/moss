<html>
<head>
<title>/fall24/nkamath/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/jlu161/pa1/Lex.c<p></p><pre>
/***
* Junyu Lu // First and Last Name
* jlu161 // UCSC UserID
* 2024 Fall CSE101 PA1 // Replace ID with assignment number 
* Lex.c // FileName
* 1. Check that there are two command line arguments
    2. Count the number of lines n in the input file. Create a string array of length n and read in the lines of the
file as strings, placing them into the array. (allocate array with Heap Memory)
    3. Create the list ADT that sorts
    4. Save the alphabetical order list to output file // Description
***/ 


#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 999

int main (int argc, char *argv[]) {
    int line_count;
    FILE *in, *out;
    char line[MAX_LEN];

    // 1. Check that there are ONLY two command line arguments (excluding program name)
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }

    // 2. count number of lines and make the string array.
    // read each line of input file, then count and print tokens
    line_count = 0;
<a name="0"></a><font color="#FF0000"><a href="match148-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_26.gif"/></a>

    while (fgets(line, MAX_LEN, in) != NULL) {
        line_count++;
    }

    char** array = malloc(line_count * sizeof(char*));
    if (array == NULL) {
        fprintf(stderr, "Memory allocation failed\n");
        exit(1);
    }
    // Rewind the file to read lines again
    rewind(in);
    // Second pass: read lines into the array
    int i = 0;
    while (fgets(line, MAX_LEN, in) != NULL) {
        // Remove newline character if present
        line[strcspn(line, "\n")] = '\0';
        // Allocate memory for each line and copy it into the array
        array[i] = malloc((strlen(line) + 1) * sizeof(char));
        if (array[i] == NULL) {
            fprintf(stderr, "Memory allocation failed\n");
</font><a name="1"></a><font color="#00FF00"><a href="match148-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

            exit(1);
        }
        strcpy(array[i], line);
        i++;
    }

    // 3. Create the list ADT that sorts
    /*
    1. if only 1 element, can insert front or back
    2. during middle, only insert after
    3. if we reached the back element, can insert front or backl
    */
    List L = newList();
    append(L, 0);
    for (int i = 1; i &lt; line_count; i++) {
</font>        moveFront(L);
        while (index(L) &gt;= 0) { // While the cursor is defined
            int list_index = get(L);
            char* arr_str = array[i];  // Current string from array
            char* list_str = array[list_index]; // String from list index

            if (strcmp(arr_str, list_str) &lt;= 0) { 
                insertBefore(L, i);
                break;
            }
            
            moveNext(L);
        }
        if (index(L) == -1) { // If we reach the end of the list
            append(L, i); // Append the index at the end
        }
    }

    // 4. Save the alphabetical order list to output file
    out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }
    saveList(out, L, array);

    freeList(&amp;L);

    // Free each string in the array
    for (int i = 0; i &lt; line_count; i++) {
        free(array[i]);
    }
    // Free the array itself
    free(array);

    // close files
    fclose(in);
    fclose(out);

    return 0;
}
</pre>
</body>
</html>

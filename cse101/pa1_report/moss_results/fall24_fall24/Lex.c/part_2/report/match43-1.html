<html>
<head>
<title>/fall24/ewilson6/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/ewilson6/pa1/Lex.c<p></p><pre>
/***
* Emil Wilson
* ewilson6
* 2024 Fall CSE101 PA1
* Lex.c
* Client File that uses List ADT
***/ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 300

<a name="0"></a><font color="#FF0000"><a href="match43-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

char *strdup(const char *str){
   int n = strlen(str) + 1;
   char *dup = malloc(n);
   if(dup){
      strcpy(dup, str); 
   }
   return dup;
}

int main(int argc, char* argv[]) {
   if (argc != 3) {
      printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
      exit(1);
   }
   
   FILE* in = fopen(argv[1], "r");
      if (in == NULL){
      printf("Unable to open file %s for reading\n", argv[1]);
      exit(1);
   }

   FILE* out = fopen(argv[2], "w");
   if (out == NULL){
      printf("Unable to open file %s for writing\n", argv[2]);
      exit(1);
   }

   int lines = 0;
   char line[MAX_LEN];
   while (fgets(line, MAX_LEN, in) != NULL) {
      printf("%s", line);
      lines++;
   }

   char** words = calloc(sizeof(char*), lines);

   rewind(in);
   printf("rewinding list...\n");
   int line_number = 0;
   while (fgets(line, MAX_LEN, in) != NULL) {
      words[line_number] = strdup(line);
      line_number++;
   }
   printf("string array complete.\n");

   List L = newList();
   append(L, 0);
   for (int i = 1; i &lt; lines; i++) {
      char* word = words[i];
      moveFront(L);
      while (index(L) &gt;= 0) {
         if (strcmp(words[get(L)], word) &gt; 0) {
            break;
         }
         moveNext(L);
      }
      if (index(L) &lt; 0) {
         append(L, i);
      } else {
         insertBefore(L, i);
      }
   }
   printList(stdout, L);
   printf("list population complete.\n");

   moveFront(L);
   while (index(L) &gt;= 0) {
      line_number = get(L);
      fprintf(out, "%s", words[line_number]);
      moveNext(L);
   }

   printf("freeing words.\n");
   for (int i = 0; i &lt; lines; i++) {
      printf("freeing word %d.\n", i);
      free(words[i]);
   }
   printf("freed words.\n");
   free(words);
   printf("freed word array.\n");

   freeList(&amp;L);

   fclose(in);
   fclose(out);
</font>
   return 0;
}
</pre>
</body>
</html>

<html>
<head>
<title>/fall24/jliu518/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/jliu518/pa1/Lex.c<p></p><pre>
/**
 * Jeffrey Liu
 * jliu518
 * pa1
 */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include "List.h"
#include &lt;string.h&gt;

<a name="0"></a><font color="#FF0000"><a href="match94-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_93.gif"/></a>

int main(int argc, char* argv[]) {
    if (argc != 3) {
        fprintf(stderr, "need 2 file arguments");
    }

    FILE* input = fopen(argv[1], "r");
    if (input == NULL) {
        printf("error file");
        return 1;
    }

    int numLines = 0;
    int bufsize = 1024;
    char* buffer = malloc(bufsize * sizeof(char));
    char** lines = malloc(bufsize * sizeof(char*));

    while (fgets(buffer, bufsize, input) != NULL) {
        buffer[strcspn(buffer, "\n")] = '\0';
        lines[numLines] = malloc((strlen(buffer) + 1) * sizeof(char));
        strcpy(lines[numLines], buffer);
        numLines++;
    }
    
    List L = newList();

    // for (int i = 0; i &lt; numLines; i++) {
    //     append(L, i);
    // }

    for (int i = 0; i &lt; numLines; i++) {
        int inserted = 0;
        if (length(L) == 0) {
            append(L, i);
            inserted = 1;
        } 
        else {
            moveFront(L);
            while (index(L) &gt; -1) {
                if (strcmp(lines[get(L)], lines[i]) &gt; 0) {
                    insertBefore(L, i);
                    inserted = 1;
                    break;
                }
                moveNext(L);
            }
        }
        if (!inserted) {
            append(L, i);
        }
    }


    FILE* output = fopen(argv[2], "w");
    if (output == NULL) {
        printf("error write file");
        return 1;
    }

    for(moveFront(L); index(L) &gt; -1; moveNext(L)) {
        fprintf(output, "%s\n", lines[get(L)]);
    }

    for (int i = 0; i &lt; numLines; i++) {
        free(lines[i]);
</font>    }
    free(lines);
    freeList(&amp;L);
    fclose(output);
    fclose(input);
    free(buffer);
}</pre>
</body>
</html>

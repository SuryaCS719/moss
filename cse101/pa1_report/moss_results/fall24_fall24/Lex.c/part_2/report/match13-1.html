<html>
<head>
<title>/fall24/evbnguye/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/evbnguye/pa1/Lex.c<p></p><pre>
/***
* Evan Nguyen
* evbnguye
* 2024 Fall CSE101 PA1 
* Lex.c
* Client for the List ADT; Used to lexicographically sort strings
***/ 
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 300

<a name="0"></a><font color="#FF0000"><a href="match13-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

int main(int argc, char* argv[]) {
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }
    int line_count;
    FILE *in, *out;
    char line[MAX_LEN];
    
     // open files for reading and writing 
    in = fopen(argv[1], "r");
    if( in==NULL ){
        printf("Unable to open file %s for reading\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    out = fopen(argv[2], "w");
    if( out==NULL ){
        printf("Unable to open file %s for writing\n", argv[2]);
        exit(EXIT_FAILURE);
    }

    // read each line of input file, then count and print tokens
    line_count = 0;
    char **arr = NULL;
    while( fgets(line, MAX_LEN, in) != NULL)  {
        line_count += 1;
        arr = realloc(arr, line_count * sizeof(char *));
        if (strlen(line) &gt; 0 &amp;&amp; line[strlen(line) - 1] == '\n') {
            line[strlen(line) - 1] = '\0';  // Replace newline with null terminator
        }
        arr[line_count - 1] = calloc(strlen(line) + 1, sizeof(char));
        strcpy(arr[line_count - 1], line);
        
    }
    if (arr == NULL){
        return 0;
    }
    List L = newList();
    append(L, 0);
    moveFront(L);
    for (int i = 1; i &lt; line_count; i++){
        if (strcmp(arr[i], arr[get(L)]) &lt; 0){
            prepend(L, i);
            moveFront(L);
        }
        else if(strcmp(arr[i], arr[get(L)]) == 0){
            insertAfter(L, i);
            moveFront(L);
        }
        else{
            moveBack(L);
            while(index(L)&gt;=0 &amp;&amp; strcmp(arr[i], arr[get(L)]) &lt; 0){
                movePrev(L);
            }
            if (index(L) == -1){
                prepend(L, i);
            }
            else{
                insertAfter(L, i);
            }
            moveFront(L);
        }

    }
    for (int i = 1; i &lt; line_count; i++){
        fprintf(out, "%s\n", arr[get(L)]);
        moveNext(L);
    }
    fprintf(out, "%s", arr[get(L)]);
    freeList(&amp;L);
    for (int i = 0; i &lt; line_count; i++){
        free(arr[i]);
    }
    free(arr);
    fclose(in);
</font>    fclose(out);
    return 0;
}</pre>
</body>
</html>

<html>
<head>
<title>/fall24/saegomez/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nsud/pa1/Lex.c<p></p><pre>
/****************************************************************************************
*  Neo Sud
*  nsud
*  2024 Fall CSE101 PA1
*  Lex.c
*  Builds List ADT in lexicographic order
*****************************************************************************************/
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
#include"List.h" 

// Function prototypes
void buildList(List L, char* A[], int n);

int main(int argc, char* argv[]) {
    // argc length check
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    // open the input file
<a name="1"></a><font color="#00FF00"><a href="match198-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

    FILE* in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Error: unable to read from file %s\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    // count the number of lines in the input file
    int n = 0;
    char line[300];  
</font>    while (fgets(line, sizeof(line), in) != NULL) {
        n++;
    }
    rewind(in);  // Reset file pointer to the beginning of the file

    // allocate memory for the string array
    char** stringArray = calloc(n, sizeof(char*));
    for (int i = 0; i &lt; n; i++) {
        fgets(line, sizeof(line), in);
        line[strcspn(line, "\n")] = '\0';  // Remove newline character
        stringArray[i] = strdup(line);  // Store the line in the array
    }

    fclose(in);  // Close the input file

    // create the list of indices
    List L = newList();  // Create a new empty List

    // build list using insertion sort
    buildList(L, stringArray, n);

    // open the output file for writing
<a name="0"></a><font color="#FF0000"><a href="match198-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_17.gif"/></a>

    FILE* out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Error: unable to write to file %s\n", argv[2]);
        exit(EXIT_FAILURE);
    }

    // print the sorted strings to the output file using the List
    moveFront(L);
    while (index(L) &gt;= 0) {
        fprintf(out, "%s\n", stringArray[get(L)]);
        moveNext(L);
    }

    fclose(out);  // Close the output file

    // Free memory
    for (int i = 0; i &lt; n; i++) {
</font>        free(stringArray[i]);  // Free each string
    }
    free(stringArray);  // Free the array itself
    freeList(&amp;L);  // Free the List

    return 0;
}

// build the List of indices in lexicographical order
void buildList(List L, char* A[], int n) {
    append(L, 0);  // Start by inserting the first index (0)

    for (int i = 1; i &lt; n; i++) {
        moveFront(L);
        while (index(L) &gt;= 0 &amp;&amp; strcmp(A[i], A[get(L)]) &gt; 0) {
            moveNext(L);
        }
        if (index(L) &gt;= 0) {
            insertBefore(L, i);
        } else {
            append(L, i);
        }
    }
}
</pre>
</body>
</html>

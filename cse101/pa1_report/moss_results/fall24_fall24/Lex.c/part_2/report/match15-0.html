<html>
<head>
<title>/fall24/igweaver/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/igweaver/pa1/Lex.c<p></p><pre>
/*
Name: Bella Weaver
CRUZID: igweaver
Programming Assignment 1

File: Lex.c
*/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"
#undef index  // Undefine index macro if defined to avoid conflicts with List index function
#define MAX_LEN 255  // Define the maximum length for a line of input

// Function to open a file and handle errors if the file cannot be opened
<a name="0"></a><font color="#FF0000"><a href="match15-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

void handleFileOpening(FILE** file, const char* filename, const char* mode) {
    *file = fopen(filename, mode);
    if (*file == NULL) {
        fprintf(stderr, "Unable to %s file, %s.\n", (strcmp(mode, "r") == 0) ? "read from" : "write to", filename);
        exit(EXIT_FAILURE);
    }
}

// Function to count the number of lines in a file
void countLinesInFile(FILE* file, int* lineCount) {
    char buffer[MAX_LEN];
    while (fgets(buffer, sizeof(buffer), file) != NULL) {
        (*lineCount)++;  // Increment line count for each line read
    }
}

// Function to fill an array of strings with the lines from the input file
void fillStringArray(FILE* file, char strArr[][MAX_LEN], int lines) {
    char buffer[MAX_LEN];
    for (int i = 0; i &lt; lines; i++) {
        fgets(buffer, sizeof(buffer), file);  // Read each line from file
        strcpy(strArr[i], buffer);  // Copy the line to the string array
    }
}

// Function to insert the index of strings into the list in sorted order
void insertIntoList(List strList, char strArr[][MAX_LEN], int lines) {
    for (int i = 0; i &lt; lines; i++) {
        moveBack(strList);  // Start at the back of the list
        // Find the correct position to insert by comparing strings
        while (index(strList) &gt; -1 &amp;&amp; strcmp(strArr[i], strArr[get(strList)]) &lt; 0) {
            movePrev(strList);
        }
        if (index(strList) &gt; -1) {
            insertAfter(strList, i);  // Insert after the current cursor
        } else {
            prepend(strList, i);  // Insert at the front if cursor is undefined
        }
    }
}

// Function to print the sorted list of strings to the output file
void printListToFile(FILE* out, List strList, char strArr[][MAX_LEN]) {
    moveFront(strList);  // Start at the front of the list
    while (index(strList) != -1) {
        fprintf(out, "%s", strArr[get(strList)]);  // Print each string in order
        moveNext(strList);  // Move to the next element
    }
}

int main(int argc, char* argv[]) {
    // Ensure proper usage with correct number of arguments
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input_file&gt; &lt;output_file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    // Create a new empty list
    List strList = newList();
    
    // Open the input file
    FILE* in;
    handleFileOpening(&amp;in, argv[1], "r");

    int lines = 0;
    // Count the number of lines in the input file
    countLinesInFile(in, &amp;lines);
    
    // Reset the file pointer to the beginning of the file
    rewind(in);

    // Create a string array to hold the lines of the input file
    char strArr[lines][MAX_LEN];
    // Fill the string array with the lines from the input file
    fillStringArray(in, strArr, lines);

    // Close the input file after reading
    fclose(in);

    // Insert the strings into the list in sorted order based on their values
    insertIntoList(strList, strArr, lines);
    
    // Open the output file
    FILE* out;
    handleFileOpening(&amp;out, argv[2], "w");
    // Print the sorted list of strings to the output file
    printListToFile(out, strList, strArr);
    
    // Close the output file and free the memory used by the list
    fclose(out);
    freeList(&amp;strList);
</font>
    return 0;  // Exit the program successfully
}
</pre>
</body>
</html>

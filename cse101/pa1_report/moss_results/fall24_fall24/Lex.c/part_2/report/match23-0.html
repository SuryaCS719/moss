<html>
<head>
<title>/fall24/npbaron/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/npbaron/pa1/Lex.c<p></p><pre>
/***
 * Noah Baron
 * npbaron
 * 2024 Fall CSE101 PA1
 * lex.c
 * Sorts a list of newline seperated strings into alphabetical order
 */


#define MAX_LINE_LENGTH 256

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include "List.h"
#include &lt;string.h&gt;

<a name="0"></a><font color="#FF0000"><a href="match23-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int main(int argc, char *argv[]){
    if (argc &lt; 3){
        fprintf(stderr, "Main Error: Too few arguments given\n");
        exit(EXIT_FAILURE);
    }
    if (argc &gt; 3){
        fprintf(stderr, "Main Error: Too many arguments given\n");
        exit(EXIT_FAILURE);
    }

    //Read file to get length
    FILE * fp;
    char buffer[MAX_LINE_LENGTH];
    int fileLength = 0;

    fp = fopen(argv[1], "r");
    if (fp == NULL){
        fprintf(stderr, "Main Error: Trouble reading input file\n");
        exit(EXIT_FAILURE);
    }

    while(fgets(buffer, MAX_LINE_LENGTH, fp) != NULL){
        fileLength++;
    }
    
    //copy file to array
    rewind(fp);

    char **array = (char **)malloc(fileLength * sizeof(char *));
    if (array == NULL){
        fprintf(stderr, "Main Error: Memory allocation failed");
        fclose(fp);
        exit(EXIT_FAILURE);
    }

    int j = 0;
    while (fgets(buffer, MAX_LINE_LENGTH, fp) != NULL){
            buffer[strcspn(buffer, "\n")] = '\0';
            array[j] = (char *)malloc(strlen(buffer) + 1);

            if (array[j] == NULL){
                fprintf(stderr, "Main Error: Memory allocation failed");
                fclose(fp);
                exit(EXIT_FAILURE);
            }

            strcpy(array[j], buffer);
            j++;
    }

    fclose(fp);
    
    //create List and insert first value
    List sortedList = newList();
    if (sortedList == NULL){
        fprintf(stderr, "Main Error: Error creating linked list");
        exit(EXIT_FAILURE);
    }
    prepend(sortedList, 0);

    //begin sorting      strcmp(insert value, test value)
    for (int i = 1; i &lt; fileLength; i++){
        
        moveFront(sortedList);
        bool inserted = false;

        while(index(sortedList) &gt;= 0){
            if (strcmp(array[i], array[get(sortedList)]) &lt;= 0){
                insertBefore(sortedList, i);
                inserted = true;
                break;
            }
            moveNext(sortedList);
        }

        if (!inserted){
            append(sortedList, i);
        }
    }

    //print sorted list
    FILE * out;
    out = fopen(argv[2], "w");
    moveFront(sortedList);
    for (int i = 0; i &lt; fileLength; i++){
        if (strlen(array[get(sortedList)]) == 0){
            moveNext(sortedList);
        } else{
            fprintf(out,"%s\n", array[get(sortedList)]);
            moveNext(sortedList);
        }
    }
    fclose(out);

    //free memory
    for (int i = 0; i &lt; fileLength; i++){
        free(array[i]);
    }
    free(array);
    freeList(&amp;sortedList);

    return(EXIT_SUCCESS);
</font>}</pre>
</body>
</html>

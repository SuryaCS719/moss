<html>
<head>
<title>/fall24/samanika/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/samanika/pa1/Lex.c<p></p><pre>
/***
* Sanjana Manikandan
* samanika
* 2024 Fall CSE101 PA1 
* Lex.c
* Utilizes List ADT to sort arrays of strings in lexicographical order
* Received help from TA Mahyar Vahabi on both logic issues and debugging
***/ 

#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match27-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

int main(int argc, char *argv[]) {
  if (argc != 3) {
    fprintf(stderr, "error! not enough file arguments.");
    exit(EXIT_FAILURE);
  }
  FILE *input;
  FILE *output;
  char *inputfile = argv[1];
  char *outputfile = argv[2];
  input = fopen(inputfile, "r");
  if (input == NULL) {
    printf("error opening the file %s\n", inputfile);
    exit(EXIT_FAILURE);
  }
  output = fopen(outputfile, "w");
  if (output == NULL) {
    printf("error opening the file %s\n", outputfile);
    exit(EXIT_FAILURE);
  }
  char line[300];
  int num = 0;
  while (fgets(line, 300, input) != NULL) {
     num++;
  }
  rewind(input);
  char **words = malloc(num * sizeof(char *));
  if (words == NULL) {
     printf("allocation error!\n");
     exit(EXIT_FAILURE);
  }
  for (int i = 0; i &lt; num; i++) {
     fgets(line, 300, input);
     int len = strlen(line);
     while (line[len-1] == '\n' || line[len-1] == '\r') {
         line[len-1] = '\0';
     }
     words[i] = malloc(len * sizeof(char));
     strcpy(words[i], line);
  }
  fclose(input);
  List new = newList();
  append(new, 0);
  int j = 0;
  for (int i = 1; i &lt; num; i++) {
     moveBack(new);
     j = get(new);
	while (strcmp(words[i], words[j]) &lt;= 0) {
	   movePrev(new);
	   if (index(new) == -1) {
	      prepend(new, i);
	      break;
	   }
	   j = get(new);
	}
     if (index(new) &gt;= 0) {
        insertAfter(new, i);
     }
  }
  moveFront(new);
  int x;
  while (index(new) &gt;= 0) {
     x = get(new);
     fprintf(output, "%s\n", words[x]);
     moveNext(new);
  }
  for (int i = 0; i &lt; num; i++) {
    free(words[i]);
  }
  free(words);
  freeList(&amp;new);
  fclose(output);
</font>  return 0;
}
</pre>
</body>
</html>

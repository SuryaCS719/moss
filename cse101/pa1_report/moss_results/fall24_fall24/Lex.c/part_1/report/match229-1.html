<html>
<head>
<title>/fall24/xliang41/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/palreed/pa1/Lex.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

int main(int argc, char *argv[]) {
    int numLines = 0;
    FILE *in, *out;
    char lines[300];

    if (argc != 3) {
        printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    in = fopen(argv[1], "r");
    if (in == NULL) {
        printf("Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }

<a name="1"></a><font color="#00FF00"><a href="match229-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_8.gif"/></a>

    while (fgets(lines, sizeof(lines), in) != NULL) {
        numLines+=1;
    }

    char **words=malloc(numLines * sizeof(char *));
    if(words==NULL) {
        fprintf(stderr, "Error: memory allocation failed\n");
    }

    rewind(in);
</font>
    int temp = 0;
<a name="0"></a><font color="#FF0000"><a href="match229-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_13.gif"/></a>

    while (fgets(lines, 300, in) != NULL &amp;&amp; temp &lt; numLines) {

    words[temp] = malloc((strlen(lines) + 1) * sizeof(char));

    if (words[temp] == NULL) {
        fprintf(stderr, "Error: memory allocation failed\n");
        exit(EXIT_FAILURE);
    }

    strcpy(words[temp], lines);

    temp+=1;
}

    fclose(in);
</font>
    out = fopen(argv[2], "w");
    if (out == NULL) {
        printf("Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

    int location;
    List L = newList();
    for(int i=0;i&lt;numLines;++i) {
        append(L,-2);
    }
    for(int i=0;i&lt;numLines;++i) {
        location=0;
        for(int j=0;j&lt;numLines;++j) {
            if(strcmp(words[j],words[i])&lt;0) {
                location+=1;
            }

        }
        moveFront(L);    

        while(index(L)!=location) {
            moveNext(L);
        }
        set(L,i);
    }


    moveFront(L);
    for(int i=0;i&lt;length(L);i+=1){
        fprintf(out, "%s", words[get(L)]);
        moveNext(L);
    }

    fclose(out);

    freeList(&amp;L);
    for (int i = 0; i &lt; numLines; i++) {
        free(words[i]);
    }
    free(words);

    return 0;
}
</pre>
</body>
</html>

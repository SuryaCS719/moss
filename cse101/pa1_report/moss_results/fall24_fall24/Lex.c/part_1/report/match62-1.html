<html>
<head>
<title>/fall24/skarnawa/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/skarnawa/pa1/Lex.c<p></p><pre>
//Servesh Karnawat
//skarnawa
//pa1




#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match62-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_95.gif"/></a>

int main(int argc, char* argv[]){
    if(argc != 3){
        fprintf(stderr, "incorrect format of running the file. it should be : Lex &lt;input file&gt; &lt;output file&gt;");
    }


    FILE *inFile = fopen(argv[1], "r");
    if (inFile == NULL){
        fprintf(stderr, "you entered a null file");
        return -1;


    }

    FILE *outFile = fopen(argv[2], "w");
    //start counting the lines

    int lineamt = 0;
    char buffer [200];
    //fgets returns NULL when it reaches EOF
    while (fgets(buffer, sizeof(buffer), inFile) != NULL ){
        
        //get rid of \n new line
        if(buffer[(strlen(buffer))-1] == '\n'){
            buffer[(strlen(buffer)) -1] = '\0';
        }
        lineamt++;

    }

    //reset file pointer to beggining so I can re-read file for next part
    rewind(inFile);

    //save the numbers in an array 
    //allocate memory
    char **lines = calloc (lineamt, sizeof(char*));
    for (int i = 0; i&lt;lineamt; i++){
        //read the information from the input file
        fgets(buffer, sizeof(buffer), inFile);
        if(buffer[(strlen(buffer))-1] == '\n'){
            buffer[(strlen(buffer)) -1] = '\0';
        }
        //set buffer in the allocated memory
        //add one to strlenbuffer for ending command
        lines[i] = malloc((strlen(buffer)) +1);
        if (lines[i] != NULL){
            strcpy(lines[i], buffer);
        }
        else{
            fprintf(stderr,"setting data failed");

        }

    }
    fclose(inFile);

    List myList = newList();


    //insertion sort with the ADT
    for(int i = 0; i &lt; lineamt; i++){
        moveFront(myList);

        while (index(myList) &gt;= 0 &amp;&amp; strcmp(lines[i], lines[ get(myList)])&gt;0){
            moveNext(myList);
        }
        

        if (index(myList) &gt;= 0){
            insertBefore(myList, i);
        }
        else{
            append(myList,i);
        }
    }

 
    //printing the new sorted items
    moveFront(myList);

    //repeat until every item stated and index = -1 for out of list
    for (int i =0; index(myList) &gt;=0; i++){
        printf(lines[get(myList)]);
        fprintf(outFile, "%s\n", lines[get(myList)]);

        moveNext(myList);
    }
    



    //printList(outFile, myList);
    fclose(outFile);
    


    //free the lines
    for (int i = 0; i&lt;lineamt ; i++){
        free(lines[i]);
</font>
    }

    free(lines);

    

    freeList(&amp;myList);
    return 0;
}</pre>
</body>
</html>

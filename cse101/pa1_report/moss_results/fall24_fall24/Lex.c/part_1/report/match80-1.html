<html>
<head>
<title>/fall24/bfeinber/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/bfeinber/pa1/Lex.c<p></p><pre>
/***
* Bodie Feinberg
* bfeinber
* 2024 Fall CSE101 PA1
* Lex.c
* List ADT Client Module
***/
#include "List.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;stdbool.h&gt;
#define MAX_LEN 300

int main(int argc, char *argv[]) {
    if (argc != 3) {
<a name="0"></a><font color="#FF0000"><a href="match80-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_90.gif"/></a>

        fprintf(stderr, "Usage: %s &lt;arg1&gt; &lt;arg2&gt;\n", argv[0]);
        return 1; // Return a non-zero value to indicate an error
    }

    FILE *input = fopen(argv[1], "r");
    if (input == NULL) {
        perror("Error opening file");
        return 1;
    }

    FILE *output = fopen(argv[2], "w");
    if(output == NULL){
        printf("Unable to open file %s for writing\n", argv[2]);
        return(1);
    }

    int line_count = 0;
    char buffer[MAX_LEN];
    while(fgets(buffer, sizeof(buffer), input)) {
	line_count++;	    
    }

    if (line_count &lt;= 0) {
        printf("Error input file is empty");
        return(1);
    }

    rewind(input);

    char** input_lines = calloc(line_count, sizeof(char*));
    int m = 0;
    while(fgets(buffer, sizeof(buffer), input)) {
    	input_lines[m] = calloc(1, sizeof(buffer));
	strcpy(input_lines[m], buffer);
	m++;
    }

    List L = newList();
    prepend(L, 0);
    
    int i;
    int x;
    bool inserted;

    for(i = 1; i &lt; line_count; i++) {
	char* key = input_lines[i];
	moveFront(L);

	while(index(L) &gt;= 0){
	    x = get(L);
	    inserted = false;
	    if(strcmp(key, input_lines[x]) &lt;= 0) {
	    	insertBefore(L, i);
		inserted = true;
		break;	
	    }
 	    moveNext(L);
        }
	if (!inserted) {
 	     append(L, i);
        }
    }

    moveFront(L);
    int y;
    while(index(L) &gt;= 0) {
	y = get(L);
	char* line = input_lines[y];
	fprintf(output,"%s", line);
	moveNext(L);
    }
    

    freeList(&amp;L);
    for(int j = 0; j &lt; line_count; j++) {
        free(input_lines[j]);  // Free each string
    }
    free(input_lines);
</font>    fclose(input);
    fclose(output);

    return(0);
}
</pre>
</body>
</html>

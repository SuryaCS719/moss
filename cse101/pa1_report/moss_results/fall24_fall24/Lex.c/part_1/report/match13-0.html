<html>
<head>
<title>/fall24/njbaldon/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/njbaldon/pa1/Lex.c<p></p><pre>
/* 
 * Name: Noah Baldonado
 * CruzID: njbaldon
 * Assignment Name: pa1
 * Lex.c
 */

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 300

<a name="1"></a><font color="#00FF00"><a href="match13-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

int main(int argc, char* argv[]) {
   // check that there are 2 command line arguments (besides the program name)
   if (argc != 3) {
      fprintf(stderr, "Lex error: There were not exactly 2 command line arguments given.\n");
      exit(EXIT_FAILURE);
   }

   // open the first file for reading
   FILE* in = fopen(argv[1], "r");
   if (in == NULL) {
      fprintf(stderr, "Lex error: Could not open %s for reading.\n", argv[1]);
</font>      exit(EXIT_FAILURE);
   }

   // open the second file for writing
<a name="0"></a><font color="#FF0000"><a href="match13-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_84.gif"/></a>

   FILE* out = fopen(argv[2], "w");
   if (out == NULL) {
      fprintf(stderr, "Lex error: Could not open %s for writing.\n", argv[2]);
      exit(EXIT_FAILURE);
   }

   // count the number of lines in in
   int n = 0;
   char* line = calloc(MAX_LEN, sizeof(char));
   while (fgets(line, MAX_LEN, in)) {
      n++;
   }

   // create the array A
   char** A = calloc(n, sizeof(char*));

   // close and reopen the first file for reading
   fclose(in);
   in = fopen(argv[1], "r");
   if (in == NULL) {
      fprintf(stderr, "Lex error: Could not open %s for reading.\n", argv[1]);
      exit(EXIT_FAILURE);
   }

   // read in the strings
   int i = 0;
   while (fgets(line, MAX_LEN, in)) {
      // allocate memory and copy string (allocates memory)
      char* copy = calloc(MAX_LEN, sizeof(char));
      int j = 0;
      while (j &lt; MAX_LEN &amp;&amp; line[j] != '\0' &amp;&amp; line[j] != '\n') {
         copy[j] = line[j];
         j++;
      }
      if (j == MAX_LEN) {
         copy[j - 1] = '\0';
      } else {
         copy[j] = '\0';
      }

      // put the copy in the array
      A[i++] = copy;
   }

   // close in file and free line
   fclose(in);
   free(line);

   // create the List L
   List L = newList();

   for (int i = 0; i &lt; n; i++) {
      // case if it is empty (not necessary) 
      if (i == 0) {
         append(L, i);
         continue;
      }

      // go to front and check each element
      moveFront(L);
      while (index(L) != -1) {
         if (strcmp(A[i], A[get(L)]) &lt;= 0) {
            insertBefore(L, i);
            break;
         }
         moveNext(L);
      }
      if (index(L) == -1) {
         append(L, i);
      }
   }

   // print the array in alphabetical order to the out file by using the List
   moveFront(L);
   for (int i = 0; i &lt; n - 1; i++) {
      fprintf(out, "%s\n", A[get(L)]);
      moveNext(L);
   }
   fprintf(out, "%s", A[get(L)]);

   // close out file
   fclose(out);

   // free the List
   freeList(&amp;L);
   
   // free the array
   for (int i = 0; i &lt; n; i++) {
      free(A[i]);
   }
   free(A);

   return 0;
</font>}
</pre>
</body>
</html>

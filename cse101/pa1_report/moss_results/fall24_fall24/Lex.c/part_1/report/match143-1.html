<html>
<head>
<title>/fall24/cevail/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/cevail/pa1/Lex.c<p></p><pre>
//---------------------------------------
// Lex.c - Main File for this Assignment
// Charles Vail (cevail@ucsc.edu)
// Programming Assignment #1
//---------------------------------------

#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include "List.c"

#define MAX_LEN 160

int main(int argc, char *argv[])
{
<a name="0"></a><font color="#FF0000"><a href="match143-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_57.gif"/></a>

        if (argc != 3)
        {
                fprintf(stderr, "Usage Message: %s &lt;input_file&gt; &lt;output_file&gt;\n", argv[0]);
                exit(1);
        }
	FILE *in = fopen(argv[1], "r");
        FILE *out = fopen(argv[2], "w");
        if (!in || !out)
        {
                fprintf(stderr, "Error! Files could not be opened.");
                exit(1);
        }
	int Count = 0;
        char line[MAX_LEN];
        while(fgets(line, MAX_LEN, in)) Count++;
        rewind(in);
        char **lines = calloc(Count, sizeof(char *));
        for (int i = 0; i &lt; Count; i++)
        {
                fgets(line, MAX_LEN, in);
                lines[i] = strdup(line);
        }
	List index = newList();
        append(index, 0);
        for (int i = 1; i &lt; Count; i++)
	{
                moveFront(index);
                while (cursorIndex(index) &gt;= 0 &amp;&amp; strcmp(lines[i], lines[get(index)]) &gt;= 0)
</font>                {
                        moveNext(index);
                }
                if (cursorIndex(index) &gt;= 0)
                {
                        insertBefore(index, i);
                } else {
                        append(index, i);
                }
        }
	for (moveFront(index); cursorIndex(index) &gt;= 0; moveNext(index))
        {
                fprintf(out, "%s", lines[get(index)]);
        }
	for (int i = 0; i &lt; Count; i++) 
        {
                free(lines[i]);
        }
	free(lines);
        freeList(&amp;index);
        fclose(in);
        fclose(out);
        return (0);
}

</pre>
</body>
</html>

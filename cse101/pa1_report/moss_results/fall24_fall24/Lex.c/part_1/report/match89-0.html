<html>
<head>
<title>/fall24/nadilope/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nadilope/pa1/Lex.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"
#define MAX_LEN 300 

<a name="1"></a><font color="#00FF00"><a href="match89-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_15.gif"/></a>

int main(int argc, char * argv[]){
   int line_count;
   FILE *in, *out;
   char line[MAX_LEN];
   char* temp;


   // check command line for correct number of arguments
   if( argc != 3 ){
      printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
      exit(1);
   }

   // open files for reading and writing 
   in = fopen(argv[1], "r");
</font>      if( in==NULL ){
      printf("Unable to open file %s for reading\n", argv[1]);
      exit(1);
   }

   out = fopen(argv[2], "w");
<a name="0"></a><font color="#FF0000"><a href="match89-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_70.gif"/></a>

   if( out==NULL ){
      printf("Unable to open file %s for writing\n", argv[2]);
      exit(1);
   }

   // read each line of input file, then count the number of lines within it.
   
   while( fgets(line, MAX_LEN, in) != NULL) {
    line_count++;
   }

   char** strings = malloc(line_count * sizeof(char*));
    rewind(in);
    temp = fgets(line, MAX_LEN, in);
    for(int i=0; temp != NULL; temp = fgets(line,MAX_LEN, in)){
        size_t length = strlen(temp);
        strings[i] = malloc(length + 1);
        strcpy(strings[i], temp);
        i++;
    }

    List L = newList();  //put strings into list and sort
    append(L, 0);
    moveBack(L);

    //go from right to left inserting when string is greater than left but less than right.
    for(int i = 1; i &lt; line_count; i++){  
      	while(true){
      		if(strcmp(strings[get(L)], strings[i]) &lt;= 0){
      			insertAfter(L,i);
      			moveBack(L);
      			break;
      		}
      		if(index(L) == 0){
      			prepend(L,i);
      			moveBack(L);
      			break;
      		}
      		movePrev(L);
      	}
    }

    //write to output file 
    moveFront(L);
      for(int i = 0; i &lt; length(L); i++){
         fprintf(out, "%s", strings[get(L)]);
         moveNext(L);
      }
      
   // close files 
   fclose(in);
   fclose(out);
   
   // free memory
   freeList(&amp;L);
   for(int i =0; i &lt; line_count; i++){
   	free(strings[i]);
   }
   free(strings);
</font>   
   return(0);
}
</pre>
</body>
</html>

<html>
<head>
<title>/fall24/kpadhya/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/kpadhya/pa1/Lex.c<p></p><pre>
/***
* Kanei Padhya                                                                  * kpadhya
* 2024 Fall CSE101 PA{1} // Replace ID with assignment number
* Lex.c
* file lexigraphically sorts inputf and outputs the sorted list in outf         ***/



#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdbool.h&gt;
#include "List.h"


<a name="0"></a><font color="#FF0000"><a href="match71-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int main(int argc, char **argv) {
    if (argc != 3) {
        fprintf(stderr, "Usage: Lex.c &lt;input file&gt; &lt;output file&gt;\n");
        return(1);
    }

    FILE *inputf = fopen(argv[1], "r");
    if (inputf == NULL) {
        fprintf(stderr, "input file could not be opened\n");
        return(1);
    }
    char a = getc(inputf);
    int x = 0;
    while(a != EOF){
        if(a == '\n'){
                x++;
        }
        a = getc(inputf);
    }

    char **str_array = malloc(x * sizeof(char*));
    fseek(inputf, 0, SEEK_SET);
    char t[25]= {0};
    int l;
    for(int i = 0; fscanf (inputf, "%[^\n] ", t) != EOF; i++){
        l = strlen(t);
        str_array[i] = malloc(l);
        strcpy(str_array[i], t);
    }

    List L = newList();
    append(L, 0);

    int i = 1;
    while (i &lt; x) {
        moveFront(L);
        while (index(L) != -1) { 
            if (strcmp(str_array[i], str_array[get(L)]) &lt;= 0) {
                insertBefore(L, i);
                break;
            }
	    else{
	    
            moveNext(L); // Move the cursor to the next node
	    }
        }
        if (index(L) == -1) { // If 
            append(L, i);
	    break;
        }
        i++; // Increment 'i' to avoid infinite loop
    }


    FILE *outf = fopen(argv[2], "w");
    if (outf == NULL) {
        fprintf(stderr, "output file could not be opened\n");
        return(1);
    }
    int d = -1;
    moveFront(L);
    while (index(L) &gt;= 0) {
        d = get(L);
        fprintf(outf, "%s\n", str_array[d]);
        moveNext(L);
    }


    for (int y = 0; y &lt; x; y++) {
        free(str_array[y]);

    }
    free(&amp;(*str_array));

    freeList(&amp;L);

    fclose(inputf);
    fclose(outf);


    return 0;
</font>}
</pre>
</body>
</html>

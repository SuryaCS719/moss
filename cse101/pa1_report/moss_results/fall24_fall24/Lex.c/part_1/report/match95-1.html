<html>
<head>
<title>/fall24/cberezny/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/cberezny/pa1/Lex.c<p></p><pre>
/***
* Cole Berezny
* cberezny
* 2024 Fall CSE101 PA1
* Lex.c
* Main file that handles file input, sorting, and writing to output.
***/ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

// Insert Sort
<a name="0"></a><font color="#FF0000"><a href="match95-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

void insertSorted(List sortedList, int lineIndex, char* lines[]) {
    moveFront(sortedList);

    // Compare new index with elements in list
    while (index(sortedList) &gt;= 0) {
        int currentIndex = get(sortedList);

        if (strcmp(lines[lineIndex], lines[currentIndex]) &lt; 0) {
            // If new line should be before current line, insert it before
            insertBefore(sortedList, lineIndex);
            return;
        }

        // Move to the next element
        moveNext(sortedList);
    }

    // If at end of list, append to end of list
    append(sortedList, lineIndex);
}

int main(int argc, char* argv[]) {
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input_file&gt; &lt;output_file&gt;\n", argv[0]);
        return EXIT_FAILURE;
    }

    FILE* inputFile = fopen(argv[1], "r");
    if (inputFile == NULL) {
        perror("Error opening input file");
        return EXIT_FAILURE;
    }

    // New list to hold the sorted indices
    List sortedList = newList();

    // Create an array to store the original lines
    char* lines[1000];  // Make buffer 1000 lines because maybe its that big HAHAHAHAHAHA
    int lineCount = 0;

    char line[1000];

    // Read each line 
    while (fgets(line, sizeof(line), inputFile) != NULL) {
        // Remove newline character
        line[strcspn(line, "\n")] = '\0';

        lines[lineCount] = malloc(strlen(line) + 1);  // Allocate memory for the line
        strcpy(lines[lineCount], line);  // Copy the line into the allocated memory

        // Insert the index of line into the sorted list
        insertSorted(sortedList, lineCount, lines); 

        lineCount++;  // Next line
    }

    fclose(inputFile);

    FILE* outputFile = fopen(argv[2], "w");
    if (outputFile == NULL) {
        perror("Error opening output file");
        freeList(&amp;sortedList);
        return EXIT_FAILURE;
    }

    // Write the sorted lines to the output file based on the sorted indices
    for (moveFront(sortedList); index(sortedList) &gt;= 0; moveNext(sortedList)) { 
        int lineIndex = get(sortedList);

        // Write line that corresponds to the new, sorted index to output
        fprintf(outputFile, "%s\n", lines[lineIndex]);
    }

    // Close files and free remaining stuff
    fclose(outputFile);
    freeList(&amp;sortedList);

    // Free the lines
    for (int i = 0; i &lt; lineCount; i++) {
        free(lines[i]);
</font>    }

    return EXIT_SUCCESS;
}

//good</pre>
</body>
</html>

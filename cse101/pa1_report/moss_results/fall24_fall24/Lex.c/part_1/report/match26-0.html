<html>
<head>
<title>/fall24/nkambo/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nkambo/pa1/Lex.c<p></p><pre>
/*********************************************************************************
 * Noor Kambo, nkambo
 * 2024 Fall CSE 101 pa1
 * Lex.c
 * Arranges inout to lexicon order
 * Code is based off of provided FileIO.c
 *********************************************************************************/
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 300

<a name="1"></a><font color="#00FF00"><a href="match26-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

int main(int argc, char *argv[]) {
    
    FILE *in, *out;
    
    if (argc != 3) {
        printf("Usage %s &lt;input file&gt; &lt;output file&gt;", argv[0]);
        exit(1);
    }
    in = fopen(argv[1], "r");
</font>    if (in == NULL){
<a name="0"></a><font color="#FF0000"><a href="match26-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_83.gif"/></a>

        printf("Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }
    out = fopen(argv[2], "w");
    if (out == NULL){
        printf("Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }
    
    long lineCount = 0;
    int currChar = 0;
    
    while (1){
        currChar = fgetc(in);
        if (currChar == EOF){
            break;
        }
        if (currChar == '\n'){
            lineCount++;
        }
    }
    char **items = malloc(lineCount * sizeof(char *));
    char line[MAX_LEN];
    char *token;
    long i, count = 0;
    fseek(in, 0, SEEK_SET);
    
    while (fgets(line, MAX_LEN, in) != NULL){
        token = strtok(line, "\n");
        if (token == NULL){
            items[count] = malloc(sizeof(char));
            items[count][0] = '\0';
        }else{
            items[count] = malloc(strlen(token) + 1);
            strcpy(items[count], token);
        }
        count++;
        token = strtok(NULL, "\n");
    }
    
    List sorted = newList();
    append(sorted, 0);
    i = 1;
    while (i &lt; lineCount){
        char *item = items[i];
        moveFront(sorted);
        while (index(sorted) &gt;= 0 &amp;&amp; index(sorted) &lt; i){
            int j = get(sorted);
            if (strcmp(item, items[j]) &lt; 0){
                insertBefore(sorted, i);
                break;
            }
            moveNext(sorted);
        }
        if (length(sorted) &lt;= i){
            append(sorted, i);
        }
        i++;
    }
    
    int idx;
    moveFront(sorted);
    while (index(sorted) &gt;= 0){
        idx = get(sorted);
        fprintf(out, "%s\n", items[idx]);
        moveNext(sorted);
    }
    
    i = 0;
    while (i &lt; lineCount){
        free(items[i]);
        i++;
    }

    free(items);
    freeList(&amp;sorted);
    fclose(in);
    fclose(out);
</font>
    return 0;
}</pre>
</body>
</html>

<html>
<head>
<title>/fall24/shakamat/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/shakamat/pa1/Lex.c<p></p><pre>
/***
* Shreya Kamath
* shakamat 
* 2024 Fall CSE101 PA1 
* Lex.c // FileName
* Main Program  // Description
***/

// Lex.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"  

//checks for the correct number of arguments
//open an input file for reading
#define MAX_LEN 300

int main(int argc, char *argv[]) {
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

<a name="0"></a><font color="#FF0000"><a href="match98-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_87.gif"/></a>

    FILE *inputFile = fopen(argv[1], "r");
    if (inputFile == NULL) {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    // Step 2: Count the number of lines and allocate memory for strings
    // read input file lines to dynamically allocated array
    char **lines = NULL;
    size_t count = 0;
    char buffer[MAX_LEN];

    while (fgets(buffer, sizeof(buffer), inputFile)) {
        lines = realloc(lines, (count + 1) * sizeof(char *));
        lines[count] = malloc(strlen(buffer) + 1); // Allocate memory
        strcpy(lines[count], buffer); // Copy the string
        count++;
    }
    fclose(inputFile);

    // new List for indices
    List L = newList();
    
    // indices using insertion sort logic
    append(L, 0);
    for (size_t i = 1; i &lt; count; i++) {
        moveFront(L);
        while (index(L) &gt;= 0) {
            if (strcmp(lines[i], lines[get(L)]) &lt; 0) {
                insertBefore(L, i);
                break;
            }
            moveNext(L);
        }
        if (index(L) == -1) { // If reached the end
            append(L, i);
        }
    }

    // sorts lines to the output file
    FILE *outputFile = fopen(argv[2], "w");
    if (outputFile == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        freeList(&amp;L);
        for (size_t i = 0; i &lt; count; i++) {
            free(lines[i]);
        }
        free(lines);
        exit(EXIT_FAILURE);
    }

    for (moveFront(L); index(L) &gt;= 0; moveNext(L)) {
        fprintf(outputFile, "%s", lines[get(L)]);
    }
    fclose(outputFile);

    // Free memory
    for (size_t i = 0; i &lt; count; i++) {
        free(lines[i]);
</font>    }
    free(lines);

    return EXIT_SUCCESS;
}</pre>
</body>
</html>

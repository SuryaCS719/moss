<html>
<head>
<title>/fall24/unettam/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/unettam/pa1/Lex.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;assert.h&gt;
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match23-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

int main (int argc, char* argv[]) {
    if (argc != 3) {
        fprintf(stderr, "Incorrect number of files inputed");
        exit(EXIT_FAILURE);
    }

    int char_count = 0;
    int num_lines = 0;
    FILE* open_file = fopen(argv[1], "r");
    while ((char_count = fgetc(open_file)) != EOF) {
        if(char_count == '\n'){
            num_lines+=1;
        }
    }

    char** lines = malloc(num_lines * sizeof(char*));
    assert(lines != NULL);

    rewind(open_file);

    for (int i = 0; i &lt; num_lines; i++) {
        char* hold_str = malloc(256 * sizeof(char));
        int char_iter = 0;
        char c; 
        while ((c = fgetc(open_file)) != EOF &amp;&amp; c != '\n') {
            hold_str[char_iter] = c;
            char_iter++;
        }
        hold_str[char_iter] = '\0';
        lines[i] = malloc(strlen(hold_str) + 1 * sizeof(char));
        if (lines[i] == NULL) {
            for (int j = 0; j &lt; i; j++) {
                free(lines[j]);
            }
        free(lines);
        fclose(open_file);
        exit(EXIT_FAILURE);
        }
    strcpy(lines[i], hold_str);
    free(hold_str);
    }

    fclose(open_file);

    List sort_nums = newList();
    append(sort_nums, 0);
    for (int i = 1; i &lt; num_lines; i++) {
        moveFront(sort_nums);
        while (index(sort_nums) &gt;= 0) {
            int current = get(sort_nums);
            if (strcmp(lines[i], lines[current]) &lt; 0) {
                insertBefore(sort_nums, i);
                break;
            }
        moveNext(sort_nums);
        }

        if (index(sort_nums) == -1) {
            append(sort_nums, i);
        }
    }

    FILE* outFile = fopen(argv[2], "w");
    if (outFile == NULL) {
        freeList(&amp;sort_nums);
        for (int i = 0; i &lt; num_lines; i++) {
            free(lines[i]);
        }
        free(lines);
        exit(EXIT_FAILURE);
    }
        printList(outFile, sort_nums, lines);
        fclose(outFile);
        freeList(&amp;sort_nums);
        for (int i = 0; i &lt; num_lines; i++) {
            free(lines[i]);
            }
        free(lines);
</font>        return 0;
}
</pre>
</body>
</html>

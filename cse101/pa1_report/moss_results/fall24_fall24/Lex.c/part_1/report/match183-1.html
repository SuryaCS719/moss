<html>
<head>
<title>/fall24/tuzhang/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/mpatil2/pa1/Lex.c<p></p><pre>
/*
Mandar Patil
mpatil2
Fall 24 - CSE 101
Lex.c 
Main program that sorts input file lines lexographically 
*/

#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;stdbool.h&gt;
#include&lt;string.h&gt;

#include "List.h"

#define MAX_LEN 300

int main(int argc, char * argv[]){
    FILE *in, *out;

    // check command line for correct number of arguments
    if( argc != 3 ){
        printf("Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

   // open files for reading and writing 
    in = fopen(argv[1], "r");
        if( in==NULL ){
        printf("Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }
    
    out = fopen(argv[2], "w");
    if( out==NULL ){
        printf("Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

    char line[MAX_LEN]; 
    int n = 0; 
    while (fgets(line, MAX_LEN, in) != NULL) {
        n++; 
    }

    rewind(in); // go to the beginning of the file 
    char** stringArray = calloc(n, sizeof(char*)); 
<a name="0"></a><font color="#FF0000"><a href="match183-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_19.gif"/></a>

    for (int i = 0; i &lt; n; i++) {
        fgets (line, MAX_LEN, in ); 
        stringArray[i] = calloc(strlen(line) + 1, sizeof(char)); 
        strcpy(stringArray[i], line); 
    }
    fclose(in); 

    // create a list to store indices of the strings 
    List indices = newList(); 
    append(indices, 0); 
    for (int i = 1; i &lt; n; i++) {
        moveFront(indices);
        while (index(indices) &gt;= 0 &amp;&amp; strcmp(stringArray[get(indices)], 
</font>        stringArray[i]) &lt;= 0) { // if the elements are in alphabetical order
            moveNext(indices); 
        }
        if (index(indices) == -1) {
<a name="1"></a><font color="#00FF00"><a href="match183-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

            append(indices, i); 
        } else {
            insertBefore(indices, i); 
        }
    }
    out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
</font>    }

    moveFront(indices);
    while (index(indices) &gt;= 0) {
        fprintf(out, "%s", stringArray[get(indices)]);
        moveNext(indices);
    }

    // Free memory and close output file
    for (int i = 0; i &lt; n; i++) {
        free(stringArray[i]);
    }
    free(stringArray);
    freeList(&amp;indices);
    fclose(out);
    return 0; 
}</pre>
</body>
</html>

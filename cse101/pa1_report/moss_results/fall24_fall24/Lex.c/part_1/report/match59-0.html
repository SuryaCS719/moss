<html>
<head>
<title>/fall24/zdoroshe/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/zdoroshe/pa1/Lex.c<p></p><pre>
/***
* Zachary Dorshenko
* zdoroshe
* 2024 Fall CSE101 PA1
* Lex.c
* sorts lines in lexigraphic order with list ADT
***/ 

#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
#include "List.h"



<a name="0"></a><font color="#FF0000"><a href="match59-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_95.gif"/></a>

int main(int argc, char* argv[]){
    if(argc != 3){
        fprintf(stderr, "Lex.c Error: 2 command line arguments aren't given\n");
        exit(EXIT_FAILURE);
    }

    FILE *inputFile = fopen(argv[1], "r");
    if(inputFile == NULL){
        fprintf(stderr, "Lex.c Error: unable to open input file\n");
        exit(EXIT_FAILURE);
    }

    //count the lines and max length of a line
    int lines = 0;
    int maxLineLength = 0;
    int temp = 0;
    int ch;
    while ((ch = getc(inputFile)) != EOF) {
        if(ch == '\n'){
            lines++;
            maxLineLength = (maxLineLength &lt; temp) ? temp : maxLineLength;
            temp = 0;
        } else {
            temp++;
        }
    }
    //allocate memory for number of lines

    fclose(inputFile);
    //fill array with strings
    FILE *file = fopen(argv[1], "r");

    // Count the number of lines in the file

    // Allocate memory for an array of strings
    char **stringArray = malloc(lines * sizeof(char*));

    maxLineLength+=5;

    // Read each line and store it in the array
    char buffer[maxLineLength];
    for (int i = 0; i &lt;= lines; i++) {
        if (fgets(buffer, sizeof(buffer), file) != NULL) {
            // Allocate memory for each line and copy the content
            stringArray[i] = malloc((strlen(buffer) + 1) * sizeof(char));
            if (stringArray[i] != NULL) {
                strcpy(stringArray[i], buffer);
            }
        } 
    }

    fclose(file);
    lines--;
    // for (int i = 0; i &lt; lines; i++) {
    //     printf("%s\n", stringArray[i]);
    // }
    
    List L = newList();
    append(L, 0);
    moveFront(L);
    for (int i = 1; i &lt;= lines; i++){
        while(index(L) &gt;= 0){
            if(strcmp(stringArray[i], stringArray[get(L)])&lt;0){
                break;
            }
            moveNext(L);
        }
        if(index(L) &lt; 0){
            append(L, i);
        } else {
            insertBefore(L, i);
        }
        moveFront(L);
    }

    moveFront(L);
    FILE *outputFile = fopen(argv[2], "w");
    while(1){
        fprintf(outputFile, "%s", stringArray[get(L)]);
        moveNext(L);
        if(index(L) &lt; 0) break;
        // fprintf(outputFile, "\n");
    }
    fclose(outputFile);

    //free everything
    freeList(&amp;L);
    for (int i = 0; i &lt;= lines; i++) {
        free(stringArray[i]);
</font>    }

    free(stringArray);
    
    
}
</pre>
</body>
</html>

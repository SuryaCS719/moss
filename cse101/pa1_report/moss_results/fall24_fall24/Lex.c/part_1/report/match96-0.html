<html>
<head>
<title>/fall24/viqutran/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/viqutran/pa1/Lex.c<p></p><pre>
/***
 * Vinh Tran
 * viqutran
 * 2024 Fall CSE101 pa1
 * Lex.c  
 * List ADT client file
***/

#include&lt;stdio.h&gt;
#include&lt;stdbool.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
#include"List.h"

#define MAX_LEN 300

<a name="0"></a><font color="#FF0000"><a href="match96-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_82.gif"/></a>

int main(int argc, char *argv[]) {
    FILE *in, *out;
    char line[MAX_LEN];
    int line_count;
    // checking for right number of arguments
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }
    // opening files
    in = fopen(argv[1], "r");
    out = fopen(argv[2], "w");
    if (in == NULL) {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }
    if (out == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }
    // counting number of lines
    line_count = 0;
    while (fgets(line, MAX_LEN, in) != NULL) {
        line_count++;
    }
    // creating array of strings
    char **list_items = malloc(line_count * sizeof(char*));
    for (int i = 0; i &lt; line_count; i++) {
        list_items[i] = malloc(MAX_LEN * sizeof(char));
    }
    // reading lines into array
    int i = 0;
    rewind(in);
    while (fgets(line, MAX_LEN, in) != NULL) {
        strcpy(list_items[i], line);
        i++;
    }
    // creating list
    List L = newList();
    append(L, 0);
    // sorting array
    for (int i = 1; i &lt; line_count; i++) {
        char* list_item = list_items[i];
        moveFront(L);
        while (index(L) &gt;= 0 &amp;&amp; index(L) &lt; i) {
            if (strcmp(list_item, list_items[get(L)]) &lt; 0) {
                insertBefore(L, i);
                break;
            }
            moveNext(L);
            if (index(L) == -1) {
                append(L, i);
</font>            }
        }
    }
    // printing sorted array
    moveFront(L);
    while (index(L) &gt;= 0) {
        fprintf(out, "%s", list_items[get(L)]);
        moveNext(L);
    }
    // freeing memory
    for (int i = 0; i &lt; line_count; i++) {
        free(list_items[i]);
    }
    free(list_items);
    freeList(&amp;L);
    // closing files
    fclose(in);
    fclose(out);
    return 0;
}</pre>
</body>
</html>

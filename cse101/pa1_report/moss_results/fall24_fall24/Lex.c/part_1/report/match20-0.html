<html>
<head>
<title>/fall24/misaini/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/misaini/pa1/Lex.c<p></p><pre>
/*
 Mira Saini
 CruzID: misaini
 Assignment: pa1
*/

#include "List.h"
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;



<a name="0"></a><font color="#FF0000"><a href="match20-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_99.gif"/></a>

void insert_sorted(List L, char **array, int new_index) {
    char *new_string = array[new_index];

    // Start from the front of the list
    moveFront(L);

    // Find the correct position by comparing strings
    while (index(L) != -1 &amp;&amp; strcmp(array[get(L)], new_string) &lt;= 0) {
        moveNext(L);  // Move to the next element while elements are smaller or equal
    }

    // Insert the new index in the correct position
    if (index(L) == -1) {  // If we reached the end, append the index
        append(L, new_index);
    } else {  // Insert before the current cursor if we found a larger element
        insertBefore(L, new_index);
    }
}


int main(int argc, char *argv[]){
	


	if(argc!=3){
		fprintf(stderr, "Error: incorrect number of command line arguments\n");
		return 1;
	}

	char* input_file_name = argv[1];
	char* output_file_name = argv[2];
	FILE *fp = fopen(input_file_name, "r");
	if(fp==NULL){
		fprintf(stderr, "FILE was opened unsuccessfully");
		return 1;
	}
	
	FILE *out_fp = fopen(output_file_name, "w");
	if(out_fp == NULL){
		fprintf(stderr, "FILE was opened unsuccessfully");
		fclose(fp);
		return 1;
	}

	int lines = 0;
	int character = 0;
	//count the lines in input file 
	while((character = fgetc(fp)) != EOF){
		if(character == '\n'){
			lines++;
		}
	}

	rewind(fp);

	//To allocate an array to read input from file
	char** array = calloc(lines, sizeof(char*));
	if(array==NULL){
		fprintf(stderr,"Error: memory allocation for array failed\n");
		fclose(fp);
		fclose(out_fp);
		return 1;
	}
	
	char buffer[500];
	List L = newList();
	//For loop to read in strings
	for(int i = 0; i &lt; lines; i++){ //for each line
		
		if(fgets(buffer, 500, fp)!=NULL){
	
			array[i] = malloc((strlen(buffer)+1)*sizeof(char));
			if(array[i] == NULL){
				fprintf(stderr, "Error: memory allocation for array failed");
				fclose(fp);
				fclose(out_fp);
				return 1;
			}
			strcpy(array[i], buffer);
			insert_sorted(L, array, i);
		}else{
		
			fprintf(stderr, "Error: failed to read line\n");
			fclose(fp);
			fclose(out_fp);
			return 1;
		}

	}	

	
        fclose(fp);

	


		

	


	// Replace printList(out_fp, L); with:
	for (moveFront(L); index(L) != -1; moveNext(L)) {
    		fprintf(out_fp, "%s", array[get(L)]);
	
	}


	freeList(&amp;L);
	for(int i = 0; i &lt; lines; i++){
		free(array[i]);
	}
	




	//Only use List.c functions to insert indices in correct order into Listi, mimic the insertion-sort function



	

	//clear memory
        free(array);
	fclose(out_fp);
</font>        return 0;
}
	
	
	//Read lines from argc
       

	
	
//free(A);
//
// char** A = calloc(n, sizeof(char*));
</pre>
</body>
</html>

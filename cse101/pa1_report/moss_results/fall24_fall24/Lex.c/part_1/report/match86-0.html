<html>
<head>
<title>/fall24/lharnist/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/lharnist/pa1/Lex.c<p></p><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"
#define MAX_LENGTH 256

<a name="0"></a><font color="#FF0000"><a href="match86-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_92.gif"/></a>

int main(int argc, char* argv[]) {
	char** lines = NULL;
        char line[MAX_LENGTH];
	
	if (argc != 3) {
        	fprintf(stderr,"Usage: &lt;input file&gt; &lt;output file&gt;\n");
        	exit(EXIT_FAILURE);
    	}

    	//Reading file
    	FILE* inputFile = fopen(argv[1], "r");
    	if (inputFile == NULL) {
        	fprintf(stderr,"Error opening file for reading\n");
        	exit(EXIT_FAILURE);
    	}

      	//Counting lines
	int numof_Lines = 0;
    	while (fgets(line, MAX_LENGTH, inputFile) != NULL) {
        	numof_Lines += 1;
    	}

    	//Allocating memory for lines
    	lines = calloc(numof_Lines, sizeof(char*));

    	//Rewinding and reading lines
    	rewind(inputFile);
    	int indexLines;
	for (int i = 0; i &lt; numof_Lines; i++) {
        	fgets(line, MAX_LENGTH, inputFile);
		indexLines = strlen(line) + 1;
        	
		lines[i] = calloc(indexLines, sizeof(char));
        	strcpy(lines[i], line);
    	}
    	fclose(inputFile); //I FORGOT TO CLOSE :(

    	//Creating the list
	//Sorting indices
    	List L = newList();
    	for (int i = 0; i &lt; numof_Lines; i++) {
	    	if (length(L) == 0){
		    	append(L, i);
	    	}
	    	else{
		    	moveFront(L);
		    	while(index(L) &gt;= 0 &amp;&amp; strcmp(lines[get(L)], lines[i]) &lt;= 0) {
			    	moveNext(L);
		    	}
		    	if (index(L) &gt;= 0) {
			    	insertBefore(L, i);
		    	}
		    	else{
			    	append(L, i);
		    	}
	    	}
    	}

    	//Writing to output file
    	FILE* outFile = fopen(argv[2], "w");
    	if (outFile == NULL) {
        	fprintf(stderr,"Unable to open file for writing\n");
        	exit(EXIT_FAILURE);
    	}

    	moveFront(L);
    	while (index(L) &gt;= 0) {
        	fprintf(outFile, "%s", lines[get(L)]);
        	moveNext(L);
    	}

    	fclose(outFile); //CLOSING!!

    	//Freeing memory
    	for (int i = 0; i &lt; numof_Lines; i++) {
</font>        	free(lines[i]);
    	}
    	free(lines);
    	freeList(&amp;L);
	return 0;
}

</pre>
</body>
</html>

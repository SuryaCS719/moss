<html>
<head>
<title>/fall24/jhgorton/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/rsnayak/pa1/Lex.c<p></p><pre>
/***
* Richa Nayak // First and Last Name
* rsnayak // UCSC UserID
* 2024 Fall CSE101 PA{1} // Replace ID with assignment number 
* Lex.c // FileName
* C file for Lex, the main program that arranges input text in lexicographic order// Description
***/ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 1000

int main(int argc, char *argv[])
{
    if (argc != 3)
    {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    FILE *in = fopen(argv[1], "r");
    if (in == NULL)
    {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    FILE *out = fopen(argv[2], "w");
    if (out == NULL)
    {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        fclose(in);
        exit(EXIT_FAILURE);
    }

    char line[MAX_LEN];
<a name="0"></a><font color="#FF0000"><a href="match197-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_27.gif"/></a>

    int lineCount = 0;
    while (fgets(line, MAX_LEN, in) != NULL)
    {
        lineCount++;
    }

    char **lines = calloc(lineCount, sizeof(char *));
    if (lines == NULL)
    {
        fprintf(stderr, "Memory allocation failed\n");
        fclose(in);
        fclose(out);
        exit(EXIT_FAILURE);
    }

    rewind(in);
    for (int i = 0; i &lt; lineCount; i++)
    {
        fgets(line, MAX_LEN, in);
        lines[i] = calloc(strlen(line) + 1, sizeof(char));
        if (lines[i] == NULL)
        {
            fprintf(stderr, "Memory allocation failed\n");
</font>            fclose(in);
            fclose(out);
            exit(EXIT_FAILURE);
        }
        strcpy(lines[i], line);
    }

    List L = newList();
    append(L, 0);

    for (int i = 1; i &lt; lineCount; i++)
    {
        moveFront(L);
        while (index(L) &gt;= 0 &amp;&amp; strcmp(lines[i], lines[get(L)]) &gt; 0)
        {
            moveNext(L);
        }
        if (index(L) &gt;= 0)
        {
            insertBefore(L, i);
        }
        else
        {
            append(L, i);
        }
    }

    moveFront(L);
    while (index(L) &gt;= 0)
    {
        fprintf(out, "%s", lines[get(L)]);
        moveNext(L);
    }

    for (int i = 0; i &lt; lineCount; i++)
    {
        free(lines[i]);
    }
    free(lines);
    freeList(&amp;L);

    // Close files
    fclose(in);
    fclose(out);

    return 0;
}</pre>
</body>
</html>

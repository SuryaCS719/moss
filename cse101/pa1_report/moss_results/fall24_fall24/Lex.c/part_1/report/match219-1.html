<html>
<head>
<title>/fall24/acasta34/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/agmalino/pa1/Lex.c<p></p><pre>
/***
* Ava Malinowski // 
* agmalino // 
* 2024 Fall CSE101 PA1 //  
* Lex.c // 
* Working Lex.c file. Will read each line from a given input file and place each line in an array. then it will order each line
* in lexicographic order using the functions defined in List.c using a separate linked list filled with indexes. Then it will print
* the new ordered lines to the out file. // Description
***/ 

#include &lt;stdio.h&gt;
#include "List.h"
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;stdint.h&gt;


extern char* strdup(const char*);


#define MAX_LEN 300


int main( int argc, char * argv[]){

    int token_count;
    FILE *infile, *out;
    char line[MAX_LEN];
    char **out_line = NULL;
//check for correct amt of arguments
    if (argc != 3){
        fprintf(stderr,"Usage: %s &lt;input file&gt; &lt;output file&gt; \n", argv[0]);
        exit(1);
    }
//open infiles for reading
    infile = fopen(argv[1], "r");
    if( infile == NULL){
        fprintf(stderr,"Unable to open file %s for reading\n",argv[1]);
        exit(1);
    } 

//open outfile for writing
    out = fopen(argv[2], "w");
    if (out == NULL){
        fprintf(stderr,"Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

//read each line in infile and count and print tokens
    token_count = 0;
    while(fgets(line, MAX_LEN, infile) != NULL){
        token_count++;
    }
    rewind(infile);
    out_line = calloc(token_count, sizeof(char*));

    for (int i = 0; i &lt; token_count; i++){
        fgets(line, sizeof(line),infile);
        out_line[i] = strdup(line);
    }

    //&gt;0 = first string is after second string, so second string goes before
    //&lt;0 = first string is before second string
    //== 0 = first string is the same lexicographically as the second string
    List L = newList();
<a name="0"></a><font color="#FF0000"><a href="match219-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_28.gif"/></a>

    append(L, 0);
    for(int i = 1; i &lt; token_count; i++){
        moveFront(L);
        while(index(L) &gt;=  0 ){
            int x = get(L);
            if (strcmp(out_line[x],out_line[i]) &gt; 0){
                insertBefore(L,i);  
                break;
            } 
            moveNext(L);
        } 
            if (index(L) &lt; 0) {         
                append(L,i);
            }
        
    }
    for (moveFront(L); index(L) &gt;= 0; moveNext(L)){
        fprintf(out, "%s", out_line[get(L)]);
</font>    }
    for (int i = 0; i &lt; token_count; i++){
        free(out_line[i]);
    }
    
    freeList(&amp;L);
    
    free(out_line);
    
    fclose(infile);
    fclose(out);

    return(0);
}</pre>
</body>
</html>

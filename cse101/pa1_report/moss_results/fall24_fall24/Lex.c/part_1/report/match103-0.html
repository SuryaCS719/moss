<html>
<head>
<title>/fall24/sikaatwa/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/sikaatwa/pa1/Lex.c<p></p><pre>
//------------------------------------------------------------------------------
// Name Simar Atwal
// CruzID sikaatwa
// pa1
//------------------------------------------------------------------------------
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

<a name="0"></a><font color="#FF0000"><a href="match103-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_90.gif"/></a>

int main(int argc, char* argv[]){
    //printf("TEST STARTS\n");

    // 1. Check that there are two command line arguments (other than the program name Lex). Quit with a usage 
    // message to stderr if more than or less than two command line arguments are given. 
    if(argc != 3){
        printf("Must have input and output file.\n");
        exit(EXIT_FAILURE);
    }

    // 2. Count the number of lines n in the input file. Create a string array of length n and read in the lines of the
    // file as strings, placing them into the array. (Allocate this array from heap memory using functions
    // calloc() or malloc() defined in the header file stdlib.h. Do not use a variable length array. See
    // the comments here for more on this topic.) 
    //printf("Flag 1\n");
    FILE *input = fopen(argv[1], "r");
    int n = 0;
    char temp[50];
    //printf("Flag 2\n");

    while (fgets(temp, 50, input)!= NULL){ 
        n = n+1;
    }
    //rintf("Flag 3\n");
    rewind(input); //SET POINTER TO START AGAIN

    char **initial = calloc(n, sizeof(char*));
    //printf("Flag 4\n");
    int indexCurr = 0;
    while (fgets(temp, 50, input)!= NULL){ 
        temp[strcspn(temp, "\n")] = '\0';
        initial[indexCurr] = calloc(strlen(temp) + 1, sizeof(char)); 

       strcpy(initial[indexCurr], temp);
       indexCurr = indexCurr +1;
    }
    //printf("Flag 5\n");


    // 3. Create a List whose elements are the indices of the above string array. These indices should be arranged
    // in an order that indirectly sorts the array. Using the above input file as an example we would have. 
    // To build the integer List in the correct order, begin with an initially empty List, then insert the indices of
    // the array one by one into the appropriate positions of the List. Use the Insertion Sort algorithm (section
    // 2.1 of the text CLRS) as a guide to your thinking on how to accomplish this. (Please read the preceding
    // two sentences several times so that you understand what is required. You are not being asked to sort the
    // input array using Insertion Sort.) You may use only the List ADT operations defined below to manipulate 
    //the List. Note that the C standard library string.h provides a function called strcmp() that determines
    // the lexicographic ordering of two Strings. If s1 and s2 are strings then:
    //printf("Flag 6\n");
    List inOrder = newList();
    //printf("Section 1\n");

    for (int i = 0; i &lt; n; i++){
        //printf("Section 2\n");
        if(i == 0){
           //printf("Section 3\n");
           append(inOrder, i);
        }else{
           //printf("Section 4\n");
           moveFront(inOrder);
           while(index(inOrder) != -1 &amp;&amp; strcmp(initial[get(inOrder)], initial[i]) &gt; 0 ){
              //printf("Section 5\n");
              moveNext(inOrder);
              //printf("Section 5 DONE\n");
           }
           if(index(inOrder) == -1){
                //printf("Section 6\n");
                append(inOrder, i);
            }else{
                //printf("Section 7\n");
                insertBefore(inOrder, i);
            }
           //printf("Section 8\n");
        }
        //printf("Section 9\n");
    }
    //printf("Flag 7\n");


    // 4. Use the List constructed in (3) to print the array in alphabetical order to the output file. Note that at no
    // time is the array ever sorted. Instead you are indirectly sorting the array by building a List of indices in a
    // certain order.
    FILE *output = fopen(argv[2], "w");
    moveBack(inOrder);
    while (index(inOrder) != -1){
        fprintf(output, "%s\n", initial[get(inOrder)]);
        movePrev(inOrder);
    }
    for (int i = 0; i &lt; n; i++) {
</font>        free(initial[i]);
    }
    free(initial);
    freeList(&amp;inOrder);
    fclose(output);
    fclose(input);
    //printf("Flag 8\n");
    
    return 0;
}</pre>
</body>
</html>

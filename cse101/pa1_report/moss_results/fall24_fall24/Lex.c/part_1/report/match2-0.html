<html>
<head>
<title>/fall24/shravinu/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/shravinu/pa1/Lex.c<p></p><pre>
/***
* Shiva Ravinutala
* shravinu
* 2024 Fall CSE101 PA1
* ListTest.c
* Lexicographic Ordering Program that uses the List ADT
***/ 

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;

#include "List.h"

#define MAX_LEN 300

<a name="0"></a><font color="#FF0000"><a href="match2-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_98.gif"/></a>

int *lexicographicOrdering(char** wordList, int len);

int main(int argc, char *argv[]) {
    char *buffer = malloc(MAX_LEN * sizeof(char));

    (void) argc;

    FILE *infile = NULL;
    FILE *outfile = NULL;

    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        return EXIT_FAILURE;
    }

    infile = fopen(argv[1], "r");
    if (infile == NULL) {
        printf("Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }

    outfile = freopen(argv[2], "w", stdout);
    if (outfile == NULL) {
        printf("Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }
    
    //------------------------------------------------------------------------------------

    int numLines = 0;
    while (fgets(buffer, MAX_LEN, infile) != NULL) {
        numLines++;
    }

    rewind(infile);

    char **words = (char **)malloc(numLines * sizeof(char *));
    int i = 0;
    while (fgets(buffer, MAX_LEN, infile) != NULL) {
        buffer[strcspn(buffer, "\n")] = '\0';
        words[i] = (char *)malloc((strlen(buffer) + 1) * sizeof(char)); 
        strcpy(words[i], buffer);
        i++;
    }

    char** wordsOrdered = (char **)malloc(numLines * sizeof(char *));
    int *orderedIndices;
    orderedIndices = lexicographicOrdering(words, numLines);

    for (int i = 0; i &lt; numLines; i++) {
        wordsOrdered[i] = (char *)malloc((strlen(words[orderedIndices[i]]) + 1) * sizeof(char));
        strcpy(wordsOrdered[i], words[orderedIndices[i]]);
        //printf("word %d: %s\n", (i+1), wordsOrdered[i]);

        fprintf(outfile, "%s\n", wordsOrdered[i]);
    }

    for (int i = 0; i &lt; numLines; i++) {
        free(wordsOrdered[i]);
        free(words[i]);
    }
    free(words);
    free(wordsOrdered);
    free(orderedIndices);

    free(buffer);

    fclose(infile);
    fclose(outfile);

    return 0;
}


int *lexicographicOrdering(char** wordList, int len) {
    //strcmp();
    //for each value
    //  while the value is less than the value in the back
    //      move the cursor toward the front by one
    //  prepend the value
    //  move cursor back to the very back
    
    List ordered = newList();

    for (int i = 0; i &lt; len; i++) {
        char* wordCurr = wordList[i];
        //printf("current word: %s\n", wordCurr);
        if(length(ordered) == 0) {
            append(ordered, i);
        } else {
            while ((index(ordered) &gt; 0) &amp;&amp; (strcmp((wordList[get(ordered)]), wordCurr) &gt; 0)) {
                movePrev(ordered);
            }

            // if (index(ordered) == -1) {
            //     moveFront(ordered);
            //     insertBefore(ordered, i);
            // } else {
            //     insertAfter(ordered, i);
            // }

            if((strcmp((wordList[get(ordered)]), wordCurr) &lt; 0)) {
                insertAfter(ordered, i);
            } else if ((strcmp((wordList[get(ordered)]), wordCurr) &gt; 0)) {
                insertBefore(ordered, i);
            }

            // if (index(ordered) == 0) {
            //     if (strcmp((wordList[get(ordered)]), wordCurr) &gt; 0) {
            //         insertAfter(ordered, i);
            //     } else if ((strcmp((wordList[get(ordered)]), wordCurr) &lt;= 0)) {
            //         insertBefore(ordered, i);
            //     }
            // } else {
            //     insertAfter(ordered, i);
            // }
            // if((strcmp((wordList[get(ordered)]), wordCurr) &gt; 0)) {
            //     insertAfter(ordered, i);
            // } else if ((strcmp((wordList[get(ordered)]), wordCurr) &lt;= 0)) {
            //     insertBefore(ordered, i);
            // }
        }

        moveBack(ordered);
    }

    moveFront(ordered);
    int* orderedIndices = (int *)malloc(len * sizeof(int));

    for(int i = 0; i &lt; len; i++) {
        orderedIndices[i] = get(ordered);
        moveNext(ordered);
    }

    freeList(&amp;ordered);
</font>
    return orderedIndices;
}</pre>
</body>
</html>

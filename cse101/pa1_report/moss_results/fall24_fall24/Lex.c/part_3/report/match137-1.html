<html>
<head>
<title>/fall24/migquinn/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/hdinesh/pa1/Lex.c<p></p><pre>
/***
* Hemanth Dinesh // 
* hdinesh // 
* 2024 Fall CSE101 PA1 // 
* Lex.c // 
* Implements an insertion sort algorithm so lexographically sort an input file and stores it in an output file  // 
***/ 

#include "List.h"
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

#define MAX_LENGTH 256

int main(int argc, char* argv[]) {
    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    FILE *input_file = fopen(argv[1], "r");
    if (input_file == NULL) {
        fprintf(stderr, "Unable to open input file %s for reading\n", argv[1]);
        exit(1);
    }

    FILE *output_file = fopen(argv[2], "w");
    if (output_file == NULL) {
        fprintf(stderr, "Unable to open output file %s for writing\n", argv[2]);
        fclose(input_file);
        exit(1);
    }

    int num_lines = 0;
    char buff[MAX_LENGTH];


    while (fgets(buff, sizeof(buff), input_file) != NULL) {
        num_lines++;
    }
    rewind(input_file);

    char** buffs = malloc(num_lines * sizeof(char*));
    for(int j = 0; j &lt; num_lines;j++){
        fgets(buff,MAX_LENGTH,input_file);
        buffs[j] = malloc(strlen(buff)+1);
        if(buffs[j]==NULL){
            fprintf(stderr, "Memory allocation error\n");
            exit(1);
            
        }
        strcpy(buffs[j],buff);
    }
    fclose(input_file);
    
<a name="0"></a><font color="#FF0000"><a href="match137-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_24.gif"/></a>

    List arr_list = newList();
    append(arr_list,0);

    for(int i = 1; i &lt; num_lines;i++){
        moveFront(arr_list);
        while(index(arr_list)&gt;=0){
            int curr = get(arr_list);
            if(strcmp(buffs[i],buffs[curr])&lt;0){
                insertBefore(arr_list,i);
                break;
            }
            moveNext(arr_list);
        }
        if(index(arr_list)==-1){
            append(arr_list,i);
        }
        
    }
    moveFront(arr_list);
    while(index(arr_list)&gt;=0){
</font>        int idx = get(arr_list);
        fprintf(output_file,"%s",buffs[idx]);
        moveNext(arr_list);
    }
    for(int j = 0;j&lt;num_lines;j++){
        free(buffs[j]);
    }
    free(buffs);
    freeList(&amp;arr_list);
}


</pre>
</body>
</html>

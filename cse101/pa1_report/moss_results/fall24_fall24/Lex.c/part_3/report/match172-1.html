<html>
<head>
<title>/fall24/bwang96/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/anguy354/pa1/Lex.c<p></p><pre>
/***
* Andy Nguyen
* anguy354
* 2024 Fall CSE101 PA{1} 
* Lex.c
* Lexgraphical implementation for List ADT 
***/ 
#include&lt;stdio.h&gt;
#include&lt;stdbool.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;string.h&gt;
#include"List.h"


#define MAX_LEN 1000

<a name="0"></a><font color="#FF0000"><a href="match172-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_13.gif"/></a>

int main(int argc, char * argv[]){

    int count = 0;
    FILE *in, *out;
    char line[MAX_LEN];
    
    // Check command line for correct number of arguments
    if(argc != 3){
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
</font>        exit(1);
    }

    // Open files for reading and writing
    in = fopen(argv[1], "r");
    out = fopen(argv[2], "w");
    if(in == NULL){
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }
<a name="1"></a><font color="#00FF00"><a href="match172-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

    if(out == NULL){
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

    // Count the number of lines in the file
    while(fgets(line, MAX_LEN, in) != NULL) {
        count++;
    }
    
    rewind(in); // Go back to the start of the file

    // Allocate memory for array of strings
    char** array = calloc(count, sizeof(char*));
</font>    List L = newList(); // Create a new List for indices

    // Read lines from file and insert indices into the List in sorted order
    int i = 0;
    while(fgets(line, MAX_LEN, in) != NULL){
        array[i] = malloc(strlen(line) + 1);
        strcpy(array[i], line);
        // Insertion sort to place indices in order
        if(length(L) == 0){
            append(L, i);
        } else {
            moveFront(L);
            while(index(L) != -1 &amp;&amp; strcmp(array[get(L)], line) &lt; 0){
                moveNext(L);
            }
            if(index(L) == -1){
                append(L, i);
            } else {
                insertBefore(L, i);
            }
        }
        i++;
    }

    // Use sorted indices to print lines in alphabetical order
    moveFront(L);
    while(index(L) != -1){
        fprintf(out, "%s", array[get(L)]);
        moveNext(L);
    }

    // Free heap memory
    for(i = 0; i &lt; count; i++){
        free(array[i]);
    }
    free(array);
    freeList(&amp;L);

    // Close input and output files
    fclose(in);
    fclose(out);

    return(0);
}
</pre>
</body>
</html>

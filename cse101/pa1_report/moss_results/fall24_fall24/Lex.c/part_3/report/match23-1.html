<html>
<head>
<title>/fall24/adatla/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/adatla/pa1/Lex.c<p></p><pre>
/*
**************************************************************************
Name: Akhil Datla
CruzID: adatla
Assignment: pa1
File: Lex.c
***************************************************************************
*/
#include "List.h"
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

#define MAX_LEN 1000

int main(int argc, char *argv[]) {
  if (argc != 3) {
    fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
    exit(EXIT_FAILURE);
  }

<a name="0"></a><font color="#FF0000"><a href="match23-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_51.gif"/></a>

  FILE *in = fopen(argv[1], "r");
  FILE *out = fopen(argv[2], "w");

  if (in == NULL || out == NULL) {
    fprintf(stderr, "Error: Unable to open file %s\n",
            (in == NULL) ? argv[1] : argv[2]);
    exit(EXIT_FAILURE);
  }

  int lineCount = 0;
  char line[MAX_LEN];
  while (fgets(line, MAX_LEN, in) != NULL) {
    lineCount++;
  }

  fseek(in, 0, SEEK_SET);
  char **lines = malloc(lineCount * sizeof(char *));
  for (int i = 0; i &lt; lineCount; i++) {
    fgets(line, MAX_LEN, in);
    lines[i] = malloc((strlen(line) + 1) * sizeof(char));
    strcpy(lines[i], line);
  }

  List list = newList();
  append(list, 0);

  for (int i = 1; i &lt; lineCount; i++) {
</font>    moveFront(list);
<a name="1"></a><font color="#00FF00"><a href="match23-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_10.gif"/></a>

    while (index(list) &gt;= 0 &amp;&amp; strcmp(lines[get(list)], lines[i]) &lt; 0) {
      moveNext(list);
    }
    if (index(list) &gt;= 0) {
      insertBefore(list, i);
    } else {
      append(list, i);
    }
  }

  moveFront(list);
  while (index(list) &gt;= 0) {
</font>    fprintf(out, "%s", lines[get(list)]);
    moveNext(list);
  }

  for (int i = 0; i &lt; lineCount; i++) {
    free(lines[i]);
  }
  free(lines);
  freeList(&amp;list);

  fclose(in);
  fclose(out);

  return 0;
}</pre>
</body>
</html>

<html>
<head>
<title>/fall24/shmarath/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/nyu16/pa1/Lex.c<p></p><pre>
//-----------------------------------------------------------------------------
// FileIO.c
// Illustrates file input-output commands and text processing using the
// string functions strtok and strcat.
//
// compile:
//
//     gcc -std=c17 -Wall -o FileIO FileIO.c
//
//-----------------------------------------------------------------------------
#include&lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;stdbool.h&gt;
#include&lt;string.h&gt;
#include "List.h"

int main(int argc, char* argv[]) {

   FILE *in, *out;
   

   if (argc != 3) {
      fprintf(stderr, "Error\n");
      return EXIT_FAILURE;
    }
    
   in = fopen(argv[1], "r");
   if( in == NULL ){
      printf("Fopen in Error\n");
      exit(EXIT_FAILURE);
   }

   out = fopen(argv[2], "w");
   if( out == NULL ){
      printf("Fopen out Error\n");
<a name="0"></a><font color="#FF0000"><a href="match96-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_31.gif"/></a>

      exit(EXIT_FAILURE);
   }

   int lineCount = 0;
   char buffer[300];
   while (fgets(buffer, sizeof(buffer), in) != NULL) {
      lineCount++;
   }
   char **lines = malloc(lineCount * sizeof(char *));
   rewind(in);

   for(int i = 0; i &lt; lineCount; i++){
      fgets(buffer, sizeof(buffer), in);
      lines[i] = calloc((strlen(buffer) + 1), sizeof(char));
      strcpy(lines[i], buffer);
   }

   fclose(in);
</font>

   List L = newList();
   append(L, 0);


   for (int i = 1; i &lt; lineCount; i++) {
      moveFront(L);  
      while (index(L) != -1 &amp;&amp; strcmp(lines[i], lines[get(L)]) &gt; 0) {
         moveNext(L);
      }
      if (index(L) == -1) {
         append(L, i); 
      } else {
         insertBefore(L, i); 
      }
   }

   moveFront(L);
   while (index(L) != -1) {
      fprintf(out, "%s", lines[get(L)]);
      moveNext(L);
   }

   fclose(out);

   for (int i = 0; i &lt; lineCount; i++) {
      free(lines[i]);
   }
   free(lines);
   freeList(&amp;L);
   

}</pre>
</body>
</html>

<html>
<head>
<title>/fall24/yshen139/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/yshen139/pa1/Lex.c<p></p><pre>
/***
* Camilla Shen
* yshen139
* 2024 Fall CSE101 PA1
* Lex.c
* Main program that sorts lines from an input file using the List ADT
***/


#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"

int main(int argc, char* argv[]) {
	//checking for proper argument number
	if (argc != 3) {
		fprintf(stderr, "Formatting should be like: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
		return EXIT_FAILURE;

	}

<a name="0"></a><font color="#FF0000"><a href="match98-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_26.gif"/></a>

	FILE* inputFile = fopen(argv[1], "r");

	if (inputFile == NULL) {
		fprintf(stderr, "Error: unable to open file %s for reading nooo\n", argv[1]);
		return EXIT_FAILURE;
	}

	int n = 0;
	char line[256]; //buffer reading linessss
	while (fgets(line, sizeof(line), inputFile) != NULL) {
		n++;
	}
	rewind(inputFile);

	//time to make an array of strings to yeet each line yayyyyyyy!!
	char** lines = calloc(n, sizeof(char*));
	for (int i = 0; i &lt; n; i++) {
		fgets(line, sizeof(line), inputFile);
		lines[i] = malloc(strlen(line) + 1);  // +1 for the null terminator
</font>		if (lines[i] != NULL) {
			strcpy(lines[i], line);
		}

	}
	fclose(inputFile);

	//create the list and sort the indices yeahhh
	List list = newList();

	//insert the indices (insertion sort time leggoooo)
	for (int i = 0; i &lt; n; i++) {
		moveFront(list);
		while (index(list) &gt;= 0) {
			int j = get(list);
				if (strcmp(lines[i], lines[j]) &lt; 0) {
					break;
				}
				moveNext(list);

		}

		if (index(list) &gt;= 0) {
			insertBefore(list, i);
		} else {
			append(list, i);
		}
	}

	//open the output file and write the sorted lines
	FILE* outputFile = fopen(argv[2], "w");
	if (outputFile == NULL) {
		fprintf(stderr, "Error: Unable to open file %s for writing uh ohhhh\n", argv[2]);
		freeList(&amp;list);
		for (int i = 0; i &lt; n; i++) {
			free(lines[i]);
		}

		free(lines);
		return EXIT_FAILURE;
	}

	moveFront(list);
	while (index(list) &gt;= 0) {
		int idx = get(list);
		fputs(lines[idx], outputFile);
		moveNext(list);
	}
	fclose(outputFile);

	//cleanup time uwu
	freeList(&amp;list);
	for (int i = 0; i &lt; n; i++) {
		free(lines[i]);
	}
	free(lines);

	return EXIT_SUCCESS;

}

				
</pre>
</body>
</html>

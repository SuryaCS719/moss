<html>
<head>
<title>/fall24/salwebst/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/akrish38/pa1/Lex.c<p></p><pre>
/***
 * Anirudh Krishna
 * akrish38
 * 2024 Fall CSE101 PA1
 * Lex.c
 * Client for List ADT
 ***/
#include "List.h"
#include &lt;stdbool.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
int main(int argc, char **argv) {
  if (argc != 3) {
    fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
    exit(1);
  }
  FILE *fp;
  fp = fopen(argv[1], "r");
  if (fp == NULL) {
    fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
    exit(1);
  }
  FILE *op;
  op = fopen(argv[2], "w");
  if (op == NULL) {
    fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
    exit(1);
  }

  int line_count = 0;
  char line[256];
  while (fgets(line, sizeof(line), fp) != NULL) {
    line_count++;
  }
  char **inputArray = calloc(line_count, sizeof(char *));
<a name="1"></a><font color="#00FF00"><a href="match241-0.html#1" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

  rewind(fp);
  for (int i = 0; i &lt; line_count; i++) {
    fgets(line, sizeof(line), fp);
    line[strcspn(line, "\n")] = '\0';
</font>    char *ptr;
    ptr = malloc(strlen(line) + 1);
    strcpy(ptr, line);
    inputArray[i] = ptr;
  }
  List L = newList();
  append(L, 0);
  for (int i = 1; i &lt; line_count; i++) {
    moveBack(L);
    bool check = true;
    while (strcmp(inputArray[i], inputArray[get(L)]) &lt; 0) {
      if (index(L) == 0) {
        prepend(L, i);
        check = false;
        break;
      } else {
        movePrev(L);
      }
    }
    if (check) {
      insertAfter(L, i);
    }
  }
  fclose(fp);
  moveFront(L);
  while (index(L) &gt;= 0) {
    int x = get(L);
<a name="0"></a><font color="#FF0000"><a href="match241-0.html#0" target="0"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_10.gif"/></a>

    fprintf(op, "%s \n", inputArray[x]);
    moveNext(L);
  }
  for (int i = 0; i &lt; line_count; i++) {
    free(inputArray[i]);
  }
  free(inputArray);
  freeList(&amp;L);
  fclose(op);
</font>  return 0;
}</pre>
</body>
</html>

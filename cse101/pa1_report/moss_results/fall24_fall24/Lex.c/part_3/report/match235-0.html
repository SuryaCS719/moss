<html>
<head>
<title>/fall24/amanocha/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/amanocha/pa1/Lex.c<p></p><pre>
/***
* Alisha Manocha
* amanocha
* 2024 Fall CSE101 PA1
* Lex.c
* Client module for List ADT
***/

#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdbool.h&gt;
#include &lt;string.h&gt;
#include "List.h"

#define MAX_LEN 300


int main(int argc, char * argv[]) {
    int line_count;
    FILE *in, *out;
    char line[MAX_LEN];
<a name="1"></a><font color="#00FF00"><a href="match235-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_9.gif"/></a>

    char** array = NULL;

    // Check command line for correct number of arguments
    if ( argc != 3 ) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    // Open files for reading and writing
    in = fopen(argv[1], "r");
</font>    if ( in==NULL ){
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }

<a name="0"></a><font color="#FF0000"><a href="match235-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_11.gif"/></a>

    out = fopen(argv[2], "w");
    if ( out==NULL ){
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

    // Count number of lines in input file
    line_count = 0;
    while( fgets(line, MAX_LEN, in) != NULL) {
</font>	line_count++;
    }

    // Create and fill array to store lines of input file
    array = malloc(line_count * sizeof(char*));
    int i = 0;
    rewind(in);
    while (fgets(line, MAX_LEN, in) != NULL) {
        array[i] = (char*)malloc( (strlen(line)+1) * sizeof(char) );
        strcpy(array[i], line);
        i++;
    }

    // Create List to store sorted indices corresponding to lines in input file
    List L = newList();
    // Insert index of the first line
    append(L, 0);
    moveFront(L);
    // For each line in the input file, iterate through the List until we find the correct insertion place
    for (i = 1; i &lt; line_count; i++){
        // If the input line comes lexicographically after line with an index of the cursor value,
        // keep moving forward in the List
	while ( strcmp(array[i], array[get(L)])&gt;0 ){
            moveNext(L);
            if (index(L) == -1){
                // We have reached the end of the List, so append the index of this line and terminate the loop
                append(L, i);
                break;
            }
        }
        // The input line now must come lexicographically before the line with an index of the cursor value,
        // so insert right before the current cursor
        if ( index(L)!=-1 ) {
            insertBefore(L, i);
        }
        // Reset cursor to the front of the List for the next line's iterations of the List
        moveFront(L);
    }

    // Iterate through the List of our array indices and print the corresponding lines to the output file
    for ( moveFront(L); index(L)&gt;=0; moveNext(L) ) {
        fprintf(out, "%s", array[get(L)]);
    }

    // Free all strings in our array generated from the input file, our List instance, and the array itself
    for (i = 0; i &lt; line_count; i++) {
        free(array[i]);
    }
    freeList(&amp;L);
    free(array);

    // Close files
    fclose(in);
    fclose(out);

    return(0);
}
</pre>
</body>
</html>

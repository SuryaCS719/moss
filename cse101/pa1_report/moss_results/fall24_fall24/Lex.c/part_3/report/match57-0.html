<html>
<head>
<title>/fall24/akinikar/pa1/Lex.c</title>
</head>
<body bgcolor="white">
<hr/>
/fall24/akinikar/pa1/Lex.c<p></p><pre>
/***
* Avani Kinikar
* akinikar
* 2024 Fall CSE101 PA1 
* Lex.c 
* Reads lines from input file, sorts them using the List ADT, and writes to an output file
***/
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include "List.h"


#define MAX_LEN 200

char *strdup(const char *s);

int main(int argc, char *argv[]) {
    FILE *in, *out;
    char lines[MAX_LEN];

    if (argc != 3) {
        fprintf(stderr, "Usage: %s &lt;input file&gt; &lt;output file&gt;\n", argv[0]);
        exit(1);
    }

    in = fopen(argv[1], "r");
    if (in == NULL) {
        fprintf(stderr, "Unable to open file %s for reading\n", argv[1]);
        exit(1);
    }
    
    out = fopen(argv[2], "w");
    if (out == NULL) {
        fprintf(stderr, "Unable to open file %s for writing\n", argv[2]);
        exit(1);
    }

    int n = 0;
    while (fgets(lines, MAX_LEN, in) != NULL) {
        n++;
    }

    char **string_arr = malloc(n * sizeof(char *));
    if (string_arr == NULL) {
        fprintf(stderr, "Memory allocation failed\n");
        exit(1);
    }
    rewind(in);

<a name="1"></a><font color="#00FF00"><a href="match57-1.html#1" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_1_11.gif"/></a>

    for (int i = 0; i &lt; n; i++) {
        fgets(lines, MAX_LEN, in);
        string_arr[i] = strdup(lines); 
        if (string_arr[i] == NULL) {
            fprintf(stderr, "Memory allocation failed\n");
            exit(1);
</font>        }
    }

    List l = newList();
    for (int i = 0; i &lt; n; i++) {
        append(l, i);
    }
<a name="0"></a><font color="#FF0000"><a href="match57-1.html#0" target="1"><img align="left" alt="other" border="0" src="http://moss.stanford.edu/bitmaps/tm_0_18.gif"/></a>

    clear(l);

    for (int i = 0; i &lt; n; i++) {
        char *temp = string_arr[i];
        moveFront(l);
        while (index(l) &gt;= 0 &amp;&amp; strcmp(temp, string_arr[get(l)]) &gt; 0) {
            moveNext(l);
        }
        if (index(l) == -1) {
            append(l, i);
        } else {
            insertBefore(l, i);
</font>        }
    }

    moveFront(l);
    while (index(l) &gt;= 0) {
        fprintf(out, "%s", string_arr[get(l)]);
        moveNext(l);
    }

    for (int i = 0; i &lt; n; i++) {
        free(string_arr[i]);
    }
    free(string_arr);
    freeList(&amp;l);
    fclose(in);
    fclose(out);

    return 0;
}</pre>
</body>
</html>
